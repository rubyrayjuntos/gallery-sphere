import{r as S,g as Kr,u as dt,a as Fn,b as Ln,c as Rn,R as Je,S as Jr,d as jn,s as Pn,_ as An,j as v,C as Qr,e as it,f as en,h as fr,E as Dn}from"./react-three-eaa4a2f8.js";import{p as On,q as Ve,S as dr,M as Pt,r as Bn,s as Gn,t as $n,u as Wn,v as zn,w as Vn,x as At,V as St,y as tn,z as Rt,k as qt,G as Hn,J as rn,K as nn,Q as Yt,X as Nn,Y as Zn,D as on,Z as Kt,c as be,_ as ar,$ as hr,a0 as Wt,a1 as Xn,a2 as qn,h as Yn,a3 as Jt,a as Kn,a4 as Jn,a5 as pr}from"./three-e6f8a695.js";import{W as Qn,S as eo,B as to,V as Qt}from"./physics-6d92d09b.js";import{u as an,T as gr,E as mr}from"./animation-4d835848.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function c(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function u(t){if(t.ep)return;t.ep=!0;const e=c(t);fetch(t.href,e)}})();const vr=s=>{let r;const c=new Set,u=(n,i)=>{const l=typeof n=="function"?n(r):n;if(!Object.is(l,r)){const f=r;r=i??typeof l!="object"?l:Object.assign({},r,l),c.forEach(h=>h(r,f))}},t=()=>r,o={setState:u,getState:t,subscribe:n=>(c.add(n),()=>c.delete(n)),destroy:()=>c.clear()};return r=s(u,t,o),o},ro=s=>s?vr(s):vr;var sn={exports:{}},ln={},cn={exports:{}},un={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=S;function no(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var oo=typeof Object.is=="function"?Object.is:no,io=ft.useState,ao=ft.useEffect,so=ft.useLayoutEffect,lo=ft.useDebugValue;function co(s,r){var c=r(),u=io({inst:{value:c,getSnapshot:r}}),t=u[0].inst,e=u[1];return so(function(){t.value=c,t.getSnapshot=r,zt(t)&&e({inst:t})},[s,c,r]),ao(function(){return zt(t)&&e({inst:t}),s(function(){zt(t)&&e({inst:t})})},[s]),lo(c),c}function zt(s){var r=s.getSnapshot;s=s.value;try{var c=r();return!oo(s,c)}catch{return!0}}function uo(s,r){return r()}var fo=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uo:co;un.useSyncExternalStore=ft.useSyncExternalStore!==void 0?ft.useSyncExternalStore:fo;cn.exports=un;var ho=cn.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=S,po=ho;function go(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var mo=typeof Object.is=="function"?Object.is:go,vo=po.useSyncExternalStore,xo=Dt.useRef,yo=Dt.useEffect,Co=Dt.useMemo,bo=Dt.useDebugValue;ln.useSyncExternalStoreWithSelector=function(s,r,c,u,t){var e=xo(null);if(e.current===null){var a={hasValue:!1,value:null};e.current=a}else a=e.current;e=Co(function(){function n(d){if(!i){if(i=!0,l=d,d=u(d),t!==void 0&&a.hasValue){var p=a.value;if(t(p,d))return f=p}return f=d}if(p=f,mo(l,d))return p;var m=u(d);return t!==void 0&&t(p,m)?p:(l=d,f=m)}var i=!1,l,f,h=c===void 0?null:c;return[function(){return n(r())},h===null?void 0:function(){return n(h())}]},[r,c,u,t]);var o=vo(s,e[0],e[1]);return yo(function(){a.hasValue=!0,a.value=o},[o]),bo(o),o};sn.exports=ln;var wo=sn.exports;const So=Kr(wo),{useSyncExternalStoreWithSelector:ko}=So;function Uo(s,r=s.getState,c){const u=ko(s.subscribe,s.getState,s.getServerState||s.getState,r,c);return S.useDebugValue(u),u}const xr=s=>{const r=typeof s=="function"?ro(s):s,c=(u,t)=>Uo(r,u,t);return Object.assign(c,r),c},To=s=>s?xr(s):xr;function Mo(s,r){if(Object.is(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;if(s instanceof Map&&r instanceof Map){if(s.size!==r.size)return!1;for(const[u,t]of s)if(!Object.is(t,r.get(u)))return!1;return!0}if(s instanceof Set&&r instanceof Set){if(s.size!==r.size)return!1;for(const u of s)if(!r.has(u))return!1;return!0}const c=Object.keys(s);if(c.length!==Object.keys(r).length)return!1;for(let u=0;u<c.length;u++)if(!Object.prototype.hasOwnProperty.call(r,c[u])||!Object.is(s[c[u]],r[c[u]]))return!1;return!0}const sr=To((s,r)=>{function c(){var u;const{accumulated:t,startTime:e,infos:a}=r(),o=(u=r().log)==null?void 0:u.maxMemory,{totalFrames:n,log:i,gl:l,max:f}=t,h={calls:l.calls/n,triangles:l.triangles/n,points:l.points/n,lines:l.lines/n},d={gpu:i.gpu/n,cpu:i.cpu/n,mem:i.mem/n,fps:i.fps/n};return{sessionTime:(window.performance.now()-e)/1e3,infos:a,log:d,gl:h,max:f,maxMemory:o,totalFrames:n}}return{log:null,paused:!1,triggerProgramsUpdate:0,startTime:0,customData:0,fpsLimit:60,overclockingFps:!1,accumulated:{totalFrames:0,gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0},max:{gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0}}},chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos",getReport:c}}),ze=s=>sr(s,Mo);Object.assign(ze,sr);const{getState:We,setState:Ae}=sr,$e={value:0,fpsLimit:60,isOverLimit:0},mt=s=>(s==null?void 0:s.reduce((r,c)=>r+c,0))/s.length;class Io{constructor(r={}){this.names=[""],this.finished=[],this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.logsPerSecond=10,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,r),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=On.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let r=0;const c=u=>{++r<20?this.rafId=window.requestAnimationFrame(c):(this.detected=Math.ceil(1e3*r/(u-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=u)};this.rafId=window.requestAnimationFrame(c)}addUI(r){this.names.indexOf(r)===-1&&(this.names.push(r),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(r){const c=16.666666666666668,u=c-r.timeRemaining(),t=c*$e.fpsLimit/10/u;t<0||($e.value=t,$e.isOverLimit<25?$e.isOverLimit++:Ae({overclockingFps:!0}))}nextFrame(r){this.frameId++;const c=r||this.now();let u=c-this.paramTime,t=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=c;else if(c>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const e=this.frameId-this.paramFrame,a=e*1e3/u,o=We().overclockingFps?$e.value:a;if(t=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/u,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const n=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=(n==null?void 0:n.duration)||0,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(a),this.logsAccums.fps.push(o),this.logsAccums.gpu.push(t),this.overClock&&typeof window.requestIdleCallback<"u"&&($e.isOverLimit>0&&o>a?$e.isOverLimit--:We().overclockingFps&&Ae({overclockingFps:!1})),c>=this.paramTime+1e3/this.logsPerSecond&&(this.paramLogger({cpu:mt(this.logsAccums.cpu),gpu:mt(this.logsAccums.gpu),mem:mt(this.logsAccums.mem),fps:mt(this.logsAccums.fps),duration:Math.round(u),maxMemory:this.maxMemory,frameCount:e}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=c),this.overClock&&c-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=r,$e.fpsLimit=Math.round(mt(this.logsAccums.fpsFixed)/10)*100,Ae({fpsLimit:$e.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=c)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=c,this.circularId=0;else{const e=c-this.chartTime;let a=this.chartHz*e/1e3;for(;--a>0&&this.detected;){const n=(this.frameId-this.chartFrame)/e*1e3,i=We().overclockingFps?$e.value:n;this.fpsChart[this.circularId%this.chartLen]=i;const l=1e3/this.currentMem,f=this.currentCpu,h=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/u*100))+4;h>0&&(this.gpuChart[this.circularId%this.chartLen]=h),f>0&&(this.cpuChart[this.circularId%this.chartLen]=f),l>0&&(this.memChart[this.circularId%this.chartLen]=l);for(let d=0;d<this.names.length;d++)this.chartLogger({i:d,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=c}}}startGpu(){const r=this.gl,c=this.extension;if(!(!r||!c)&&this.isWebGL2){let u=!1,t,e;if(this.query){this.queryHasResult=!1;let a=this.query;if(u=r.getQueryParameter(a,r.QUERY_RESULT_AVAILABLE),t=r.getParameter(c.GPU_DISJOINT_EXT),u&&!t){e=r.getQueryParameter(this.query,r.QUERY_RESULT);const o=e*1e-6;(u||t)&&(r.deleteQuery(this.query),a=null),u&&o>0&&(t||this.activeAccums.forEach((n,i)=>{this.gpuAccums[i]=o}))}}(u||!this.query)&&(this.queryCreated=!0,this.query=r.createQuery(),r.beginQuery(c.TIME_ELAPSED_EXT,this.query))}}endGpu(){const r=this.extension,c=this.gl;this.isWebGL2&&this.queryCreated&&c.getQuery(r.TIME_ELAPSED_EXT,c.CURRENT_QUERY)&&c.endQuery(r.TIME_ELAPSED_EXT)}begin(r){this.startGpu(),this.updateAccums(r)}end(r){this.endGpu(),this.updateAccums(r)}updateAccums(r){let c=this.names.indexOf(r);c===-1&&(c=this.names.length,this.addUI(r));const u=this.now();this.activeAccums[c]=!this.activeAccums[c],this.t0=u}}const _o=s=>{s.forEach((r,c)=>{const{meshes:u}=r;if(!u)return;let t={total:0,type:"Triangle",data:[]};Object.keys(u).forEach(e=>{const a=u[e],{geometry:o,material:n}=a;let i=o.index;const l=o.attributes.position;if(!l)return;let f=1;n.wireframe===!0&&(f=0);const h=i!==null?i.count:l.count,d=o.drawRange.start*f,p=o.drawRange.count*f,m=d,g=Math.min(h,d+p)-1;let b=1;const x=a.count||1;let y="Triangle",C=0;a.isMesh?n.wireframe===!0?(y="Line",b=b/2):(y="Triangle",b=b/3):a.isLine?(y="Line",a.isLineSegments?b=b/2:a.isLineLoop?b=b:b=b-1):a.isPoints?(y="Point",b=b):a.isSprite&&(y="Triangle",b=b/3);const w=Math.round(Math.max(0,g-m+1)*(b*x));w>C&&(C=w,t.type=y),t.total+=w,t.data.push({drawCount:w,type:y}),a.userData.drawCount={type:y,count:w}}),r.drawCounts=t})};var fn={exports:{}};(function(s){var r=Object.prototype.hasOwnProperty,c="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(c=!1));function t(n,i,l){this.fn=n,this.context=i,this.once=l||!1}function e(n,i,l,f,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new t(l,f||n,h),p=c?c+i:i;return n._events[p]?n._events[p].fn?n._events[p]=[n._events[p],d]:n._events[p].push(d):(n._events[p]=d,n._eventsCount++),n}function a(n,i){--n._eventsCount===0?n._events=new u:delete n._events[i]}function o(){this._events=new u,this._eventsCount=0}o.prototype.eventNames=function(){var i=[],l,f;if(this._eventsCount===0)return i;for(f in l=this._events)r.call(l,f)&&i.push(c?f.slice(1):f);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(l)):i},o.prototype.listeners=function(i){var l=c?c+i:i,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(i){var l=c?c+i:i,f=this._events[l];return f?f.fn?1:f.length:0},o.prototype.emit=function(i,l,f,h,d,p){var m=c?c+i:i;if(!this._events[m])return!1;var g=this._events[m],b=arguments.length,x,y;if(g.fn){switch(g.once&&this.removeListener(i,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,f),!0;case 4:return g.fn.call(g.context,l,f,h),!0;case 5:return g.fn.call(g.context,l,f,h,d),!0;case 6:return g.fn.call(g.context,l,f,h,d,p),!0}for(y=1,x=new Array(b-1);y<b;y++)x[y-1]=arguments[y];g.fn.apply(g.context,x)}else{var C=g.length,w;for(y=0;y<C;y++)switch(g[y].once&&this.removeListener(i,g[y].fn,void 0,!0),b){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,l);break;case 3:g[y].fn.call(g[y].context,l,f);break;case 4:g[y].fn.call(g[y].context,l,f,h);break;default:if(!x)for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];g[y].fn.apply(g[y].context,x)}}return!0},o.prototype.on=function(i,l,f){return e(this,i,l,f,!1)},o.prototype.once=function(i,l,f){return e(this,i,l,f,!0)},o.prototype.removeListener=function(i,l,f,h){var d=c?c+i:i;if(!this._events[d])return this;if(!l)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===l&&(!h||p.once)&&(!f||p.context===f)&&a(this,d);else{for(var m=0,g=[],b=p.length;m<b;m++)(p[m].fn!==l||h&&!p[m].once||f&&p[m].context!==f)&&g.push(p[m]);g.length?this._events[d]=g.length===1?g[0]:g:a(this,d)}return this},o.prototype.removeAllListeners=function(i){var l;return i?(l=c?c+i:i,this._events[l]&&a(this,l)):(this._events=new u,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=c,o.EventEmitter=o,s.exports=o})(fn);var Eo=fn.exports;const Fo=Kr(Eo),jt=new Fo;function Lo(s,r,c){return c!=null&&c.once?jt.once(s,r):jt.on(s,r)}function Ro(s,r,c){var u;jt.removeListener(s,r,(u=c==null?void 0:c.context)!=null?u:null,c==null?void 0:c.once)}function jo(s,r){jt.emit(s,r)}function Po(s,r,c=[],u){const t=S.useRef(r);S.useEffect(()=>void(t.current=r),[r]),S.useEffect(()=>{const e=o=>{var n;return(n=t.current)==null?void 0:n.call(t,o)},a=Lo(s,e,u);return()=>Ro(s,e,{...u,context:a})},[s,u==null?void 0:u.once,...c])}const Ao=Ve.prototype.updateMatrixWorld,Do=Ve.prototype.updateWorldMatrix,yr=Ve.prototype.updateMatrix,Cr=["calls","triangles","points","lines"],br=["gpu","cpu","mem","fps"];let ct={value:0},De={value:0};const Oo=s=>{let r=""+s;return r=r.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),r!==null},wr=(s,r)=>{s.defines||(s.defines={}),s.defines&&!s.defines.muiPerf&&(s.defines=Object.assign(s.defines||{},{muiPerf:s.uuid}));const c=s.uuid;return r[c]||(r[c]={meshes:{},material:s},s.needsUpdate=!0),s.needsUpdate=!1,c},Bo=s=>s==="muiPerf",Go=({overClock:s,logsPerSecond:r,chart:c,deepAnalyze:u,matrixUpdate:t})=>{const{gl:e,scene:a}=dt();Ae({gl:e,scene:a});const o=S.useMemo(()=>{const n=new Io({trackGPU:!0,overClock:s,chartLen:c?c.length:120,chartHz:c?c.hz:60,logsPerSecond:r||10,gl:e.getContext(),chartLogger:g=>{Ae({chart:g})},paramLogger:g=>{const b={maxMemory:g.maxMemory,gpu:g.gpu,cpu:g.cpu,mem:g.mem,fps:g.fps,totalTime:g.duration,frameCount:g.frameCount};Ae({log:b});const{accumulated:x}=We(),y=e.info.render;x.totalFrames++,x.gl.calls+=y.calls,x.gl.triangles+=y.triangles,x.gl.points+=y.points,x.gl.lines+=y.lines,x.log.gpu+=g.gpu,x.log.cpu+=g.cpu,x.log.mem+=g.mem,x.log.fps+=g.fps;for(let C=0;C<Cr.length;C++){const w=Cr[C],U=y[w];U>x.max.gl[w]&&(x.max.gl[w]=U)}for(let C=0;C<br.length;C++){const w=br[C],U=g[w];U>x.max.log[w]&&(x.max.log[w]=U)}Ae({accumulated:x}),jo("log",[b,e])}}),i=e.getContext();let l=null,f=null;const h=i.getExtension("WEBGL_debug_renderer_info"),d=i.getParameter(i.VERSION);h!=null&&(l=i.getParameter(h.UNMASKED_RENDERER_WEBGL),f=i.getParameter(h.UNMASKED_VENDOR_WEBGL)),f||(f="Unknown vendor"),l||(l=i.getParameter(i.RENDERER)),Ae({startTime:window.performance.now(),infos:{version:d,renderer:l,vendor:f}});const p=new Map,m=new Map;return Object.defineProperty(dr.prototype,"onBeforeRender",{get(){return(...g)=>{var b;n&&n.begin("profiler"),(b=p.get(this))==null||b(...g)}},set(g){p.set(this,g)},configurable:!0}),Object.defineProperty(dr.prototype,"onAfterRender",{get(){return(...g)=>{var b;n&&n.end("profiler"),(b=m.get(this))==null||b(...g)}},set(g){m.set(this,g)},configurable:!0}),n},[]);return S.useEffect(()=>{o&&(o.overClock=s||!1,s===!1&&(Ae({overclockingFps:!1}),$e.value=0,$e.isOverLimit=0),o.chartHz=(c==null?void 0:c.hz)||60,o.chartLen=(c==null?void 0:c.length)||120)},[s,o,c==null?void 0:c.length,c==null?void 0:c.hz]),S.useEffect(()=>{t&&(Ve.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&ct.value++,Ao.apply(this,arguments)},Ve.prototype.updateWorldMatrix=function(){ct.value++,Do.apply(this,arguments)},Ve.prototype.updateMatrix=function(){De.value++,yr.apply(this,arguments)}),e.info.autoReset=!1;let n=null,i=null;if(e.info)return n=Fn(function(){We().paused&&Ae({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),o.startCpuProfiling=!0),De.value-=1,ct.value=0,De.value=0,e.info&&e.info.reset()}),i=Ln(function(){var f,h;if(o&&!o.paused&&(o.nextFrame(window.performance.now()),s&&typeof window.requestIdleCallback<"u"&&(o.idleCbId=requestIdleCallback(o.nextFps))),u){const d={},p=new Map;a.traverse(function(g){if((g instanceof Pt||g instanceof Bn)&&g.material){let b=g.material.uuid;Array.isArray(g.material)&&g.material.length>1?b=wr(g.material[1],d):b=wr(g.material,d),d[b].meshes[g.uuid]=g}}),(h=(f=e==null?void 0:e.info)==null?void 0:f.programs)==null||h.forEach(m=>{const g=m.cacheKey.split(","),b=g[g.findIndex(Bo)+1];if(Oo(b)&&d[b]){const{material:x,meshes:y}=d[b];p.set(b,{program:m,material:x,meshes:y,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),p.size!==We().programs.size&&(_o(p),Ae({programs:p,triggerProgramsUpdate:We().triggerProgramsUpdate++}))}}),()=>{o&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(o.idleCbId),window.cancelAnimationFrame(o.rafId),window.cancelAnimationFrame(o.checkQueryId)),t&&(Ve.prototype.updateMatrixWorld=yr),n(),i()}},[o,e,c,t]),S.useEffect(()=>{const n=Rn(function(){return o&&(o.paused=!0,De.value=0,ct.value=0,Ae({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{n()}},[]),null};var ne="colors",_e="sizes",W="space",$o={gap:W,gridGap:W,columnGap:W,gridColumnGap:W,rowGap:W,gridRowGap:W,inset:W,insetBlock:W,insetBlockEnd:W,insetBlockStart:W,insetInline:W,insetInlineEnd:W,insetInlineStart:W,margin:W,marginTop:W,marginRight:W,marginBottom:W,marginLeft:W,marginBlock:W,marginBlockEnd:W,marginBlockStart:W,marginInline:W,marginInlineEnd:W,marginInlineStart:W,padding:W,paddingTop:W,paddingRight:W,paddingBottom:W,paddingLeft:W,paddingBlock:W,paddingBlockEnd:W,paddingBlockStart:W,paddingInline:W,paddingInlineEnd:W,paddingInlineStart:W,top:W,right:W,bottom:W,left:W,scrollMargin:W,scrollMarginTop:W,scrollMarginRight:W,scrollMarginBottom:W,scrollMarginLeft:W,scrollMarginX:W,scrollMarginY:W,scrollMarginBlock:W,scrollMarginBlockEnd:W,scrollMarginBlockStart:W,scrollMarginInline:W,scrollMarginInlineEnd:W,scrollMarginInlineStart:W,scrollPadding:W,scrollPaddingTop:W,scrollPaddingRight:W,scrollPaddingBottom:W,scrollPaddingLeft:W,scrollPaddingX:W,scrollPaddingY:W,scrollPaddingBlock:W,scrollPaddingBlockEnd:W,scrollPaddingBlockStart:W,scrollPaddingInline:W,scrollPaddingInlineEnd:W,scrollPaddingInlineStart:W,fontSize:"fontSizes",background:ne,backgroundColor:ne,backgroundImage:ne,borderImage:ne,border:ne,borderBlock:ne,borderBlockEnd:ne,borderBlockStart:ne,borderBottom:ne,borderBottomColor:ne,borderColor:ne,borderInline:ne,borderInlineEnd:ne,borderInlineStart:ne,borderLeft:ne,borderLeftColor:ne,borderRight:ne,borderRightColor:ne,borderTop:ne,borderTopColor:ne,caretColor:ne,color:ne,columnRuleColor:ne,fill:ne,outline:ne,outlineColor:ne,stroke:ne,textDecorationColor:ne,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:_e,minBlockSize:_e,maxBlockSize:_e,inlineSize:_e,minInlineSize:_e,maxInlineSize:_e,width:_e,minWidth:_e,maxWidth:_e,height:_e,minHeight:_e,maxHeight:_e,flexBasis:_e,gridTemplateColumns:_e,gridTemplateRows:_e,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Wo=(s,r)=>typeof r=="function"?{"()":Function.prototype.toString.call(r)}:r,ht=()=>{const s=Object.create(null);return(r,c,...u)=>{const t=(e=>JSON.stringify(e,Wo))(r);return t in s?s[t]:s[t]=c(r,...u)}},rt=Symbol.for("sxs.internal"),lr=(s,r)=>Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)),Sr=s=>{for(const r in s)return!0;return!1},{hasOwnProperty:zo}=Object.prototype,er=s=>s.includes("-")?s:s.replace(/[A-Z]/g,r=>"-"+r.toLowerCase()),Vo=/\s+(?![^()]*\))/,at=s=>r=>s(...typeof r=="string"?String(r).split(Vo):[r]),kr={appearance:s=>({WebkitAppearance:s,appearance:s}),backfaceVisibility:s=>({WebkitBackfaceVisibility:s,backfaceVisibility:s}),backdropFilter:s=>({WebkitBackdropFilter:s,backdropFilter:s}),backgroundClip:s=>({WebkitBackgroundClip:s,backgroundClip:s}),boxDecorationBreak:s=>({WebkitBoxDecorationBreak:s,boxDecorationBreak:s}),clipPath:s=>({WebkitClipPath:s,clipPath:s}),content:s=>({content:s.includes('"')||s.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(s)?s:`"${s}"`}),hyphens:s=>({WebkitHyphens:s,hyphens:s}),maskImage:s=>({WebkitMaskImage:s,maskImage:s}),maskSize:s=>({WebkitMaskSize:s,maskSize:s}),tabSize:s=>({MozTabSize:s,tabSize:s}),textSizeAdjust:s=>({WebkitTextSizeAdjust:s,textSizeAdjust:s}),userSelect:s=>({WebkitUserSelect:s,userSelect:s}),marginBlock:at((s,r)=>({marginBlockStart:s,marginBlockEnd:r||s})),marginInline:at((s,r)=>({marginInlineStart:s,marginInlineEnd:r||s})),maxSize:at((s,r)=>({maxBlockSize:s,maxInlineSize:r||s})),minSize:at((s,r)=>({minBlockSize:s,minInlineSize:r||s})),paddingBlock:at((s,r)=>({paddingBlockStart:s,paddingBlockEnd:r||s})),paddingInline:at((s,r)=>({paddingInlineStart:s,paddingInlineEnd:r||s}))},Vt=/([\d.]+)([^]*)/,Ho=(s,r)=>s.length?s.reduce((c,u)=>(c.push(...r.map(t=>t.includes("&")?t.replace(/&/g,/[ +>|~]/.test(u)&&/&.*&/.test(t)?`:is(${u})`:u):u+" "+t)),c),[]):r,No=(s,r)=>s in Zo&&typeof r=="string"?r.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(c,u,t,e)=>u+(t==="stretch"?`-moz-available${e};${er(s)}:${u}-webkit-fill-available`:`-moz-fit-content${e};${er(s)}:${u}fit-content`)+e):String(r),Zo={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Xe=s=>s?s+"-":"",dn=(s,r,c)=>s.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(u,t,e,a,o)=>a=="$"==!!e?u:(t||a=="--"?"calc(":"")+"var(--"+(a==="$"?Xe(r)+(o.includes("$")?"":Xe(c))+o.replace(/\$/g,"-"):o)+")"+(t||a=="--"?"*"+(t||"")+(e||"1")+")":"")),Xo=/\s*,\s*(?![^()]*\))/,qo=Object.prototype.toString,ut=(s,r,c,u,t)=>{let e,a,o;const n=(i,l,f)=>{let h,d;const p=m=>{for(h in m){const x=h.charCodeAt(0)===64,y=x&&Array.isArray(m[h])?m[h]:[m[h]];for(d of y){const C=/[A-Z]/.test(b=h)?b:b.replace(/-[^]/g,U=>U[1].toUpperCase()),w=typeof d=="object"&&d&&d.toString===qo&&(!u.utils[C]||!l.length);if(C in u.utils&&!w){const U=u.utils[C];if(U!==a){a=U,p(U(d)),a=null;continue}}else if(C in kr){const U=kr[C];if(U!==o){o=U,p(U(d)),o=null;continue}}if(x&&(g=h.slice(1)in u.media?"@media "+u.media[h.slice(1)]:h,h=g.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(U,T,M,L,I,G)=>{const k=Vt.test(T),E=.0625*(k?-1:1),[_,A]=k?[L,T]:[T,L];return"("+(M[0]==="="?"":M[0]===">"===k?"max-":"min-")+_+":"+(M[0]!=="="&&M.length===1?A.replace(Vt,(R,j,O)=>Number(j)+E*(M===">"?1:-1)+O):A)+(I?") and ("+(I[0]===">"?"min-":"max-")+_+":"+(I.length===1?G.replace(Vt,(R,j,O)=>Number(j)+E*(I===">"?-1:1)+O):G):"")+")"})),w){const U=x?f.concat(h):[...f],T=x?[...l]:Ho(l,h.split(Xo));e!==void 0&&t(Ur(...e)),e=void 0,n(d,T,U)}else e===void 0&&(e=[[],l,f]),h=x||h.charCodeAt(0)!==36?h:`--${Xe(u.prefix)}${h.slice(1).replace(/\$/g,"-")}`,d=w?d:typeof d=="number"?d&&C in Yo?String(d)+"px":String(d):dn(No(C,d??""),u.prefix,u.themeMap[C]),e[0].push(`${x?`${h} `:`${er(h)}:`}${d}`)}}var g,b};p(i),e!==void 0&&t(Ur(...e)),e=void 0};n(s,r,c)},Ur=(s,r,c)=>`${c.map(u=>`${u}{`).join("")}${r.length?`${r.join(",")}{`:""}${s.join(";")}${r.length?"}":""}${Array(c.length?c.length+1:0).join("}")}`,Yo={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Tr=s=>String.fromCharCode(s+(s>25?39:97)),nt=s=>(r=>{let c,u="";for(c=Math.abs(r);c>52;c=c/52|0)u=Tr(c%52)+u;return Tr(c%52)+u})(((r,c)=>{let u=c.length;for(;u;)r=33*r^c.charCodeAt(--u);return r})(5381,JSON.stringify(s))>>>0),yt=["themed","global","styled","onevar","resonevar","allvar","inline"],Ko=s=>{if(s.href&&!s.href.startsWith(location.origin))return!1;try{return!!s.cssRules}catch{return!1}},Jo=s=>{let r;const c=()=>{const{cssRules:t}=r.sheet;return[].map.call(t,(e,a)=>{const{cssText:o}=e;let n="";if(o.startsWith("--sxs"))return"";if(t[a-1]&&(n=t[a-1].cssText).startsWith("--sxs")){if(!e.cssRules.length)return"";for(const i in r.rules)if(r.rules[i].group===e)return`--sxs{--sxs:${[...r.rules[i].cache].join(" ")}}${o}`;return e.cssRules.length?`${n}${o}`:""}return o}).join("")},u=()=>{if(r){const{rules:o,sheet:n}=r;if(!n.deleteRule){for(;Object(Object(n.cssRules)[0]).type===3;)n.cssRules.splice(0,1);n.cssRules=[]}for(const i in o)delete o[i]}const t=Object(s).styleSheets||[];for(const o of t)if(Ko(o)){for(let n=0,i=o.cssRules;i[n];++n){const l=Object(i[n]);if(l.type!==1)continue;const f=Object(i[n+1]);if(f.type!==4)continue;++n;const{cssText:h}=l;if(!h.startsWith("--sxs"))continue;const d=h.slice(14,-3).trim().split(/\s+/),p=yt[d[0]];p&&(r||(r={sheet:o,reset:u,rules:{},toString:c}),r.rules[p]={group:f,index:n,cache:new Set(d)})}if(r)break}if(!r){const o=(n,i)=>({type:i,cssRules:[],insertRule(l,f){this.cssRules.splice(f,0,o(l,{import:3,undefined:1}[(l.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return n==="@media{}"?`@media{${[].map.call(this.cssRules,l=>l.cssText).join("")}}`:n}});r={sheet:s?(s.head||s).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:u,toString:c}}const{sheet:e,rules:a}=r;for(let o=yt.length-1;o>=0;--o){const n=yt[o];if(!a[n]){const i=yt[o+1],l=a[i]?a[i].index:e.cssRules.length;e.insertRule("@media{}",l),e.insertRule(`--sxs{--sxs:${o}}`,l),a[n]={group:e.cssRules[l+1],index:l,cache:new Set([o])}}Qo(a[n])}};return u(),r},Qo=s=>{const r=s.group;let c=r.cssRules.length;s.apply=u=>{try{r.insertRule(u,c),++c}catch{}}},vt=Symbol(),ei=ht(),Mr=(s,r)=>ei(s,()=>(...c)=>{let u={type:null,composers:new Set};for(const t of c)if(t!=null)if(t[rt]){u.type==null&&(u.type=t[rt].type);for(const e of t[rt].composers)u.composers.add(e)}else t.constructor!==Object||t.$$typeof?u.type==null&&(u.type=t):u.composers.add(ti(t,s));return u.type==null&&(u.type="span"),u.composers.size||u.composers.add(["PJLV",{},[],[],{},[]]),ri(s,u,r)}),ti=({variants:s,compoundVariants:r,defaultVariants:c,...u},t)=>{const e=`${Xe(t.prefix)}c-${nt(u)}`,a=[],o=[],n=Object.create(null),i=[];for(const h in c)n[h]=String(c[h]);if(typeof s=="object"&&s)for(const h in s){l=n,f=h,zo.call(l,f)||(n[h]="undefined");const d=s[h];for(const p in d){const m={[h]:String(p)};String(p)==="undefined"&&i.push(h);const g=d[p],b=[m,g,!Sr(g)];a.push(b)}}var l,f;if(typeof r=="object"&&r)for(const h of r){let{css:d,...p}=h;d=typeof d=="object"&&d||{};for(const g in p)p[g]=String(p[g]);const m=[p,d,!Sr(d)];o.push(m)}return[e,u,a,o,n,i]},ri=(s,r,c)=>{const[u,t,e,a]=ni(r.composers),o=typeof r.type=="function"||r.type.$$typeof?(f=>{function h(){for(let d=0;d<h[vt].length;d++){const[p,m]=h[vt][d];f.rules[p].apply(m)}return h[vt]=[],null}return h[vt]=[],h.rules={},yt.forEach(d=>h.rules[d]={apply:p=>h[vt].push([d,p])}),h})(c):null,n=(o||c).rules,i=`.${u}${t.length>1?`:where(.${t.slice(1).join(".")})`:""}`,l=f=>{f=typeof f=="object"&&f||oi;const{css:h,...d}=f,p={};for(const b in e)if(delete d[b],b in f){let x=f[b];typeof x=="object"&&x?p[b]={"@initial":e[b],...x}:(x=String(x),p[b]=x!=="undefined"||a.has(b)?x:e[b])}else p[b]=e[b];const m=new Set([...t]);for(const[b,x,y,C]of r.composers){c.rules.styled.cache.has(b)||(c.rules.styled.cache.add(b),ut(x,[`.${b}`],[],s,T=>{n.styled.apply(T)}));const w=Ir(y,p,s.media),U=Ir(C,p,s.media,!0);for(const T of w)if(T!==void 0)for(const[M,L,I]of T){const G=`${b}-${nt(L)}-${M}`;m.add(G);const k=(I?c.rules.resonevar:c.rules.onevar).cache,E=I?n.resonevar:n.onevar;k.has(G)||(k.add(G),ut(L,[`.${G}`],[],s,_=>{E.apply(_)}))}for(const T of U)if(T!==void 0)for(const[M,L]of T){const I=`${b}-${nt(L)}-${M}`;m.add(I),c.rules.allvar.cache.has(I)||(c.rules.allvar.cache.add(I),ut(L,[`.${I}`],[],s,G=>{n.allvar.apply(G)}))}}if(typeof h=="object"&&h){const b=`${u}-i${nt(h)}-css`;m.add(b),c.rules.inline.cache.has(b)||(c.rules.inline.cache.add(b),ut(h,[`.${b}`],[],s,x=>{n.inline.apply(x)}))}for(const b of String(f.className||"").trim().split(/\s+/))b&&m.add(b);const g=d.className=[...m].join(" ");return{type:r.type,className:g,selector:i,props:d,toString:()=>g,deferredInjector:o}};return lr(l,{className:u,selector:i,[rt]:r,toString:()=>(c.rules.styled.cache.has(u)||l(),u)})},ni=s=>{let r="";const c=[],u={},t=[];for(const[e,,,,a,o]of s){r===""&&(r=e),c.push(e),t.push(...o);for(const n in a){const i=a[n];(u[n]===void 0||i!=="undefined"||o.includes(i))&&(u[n]=i)}}return[r,c,u,new Set(t)]},Ir=(s,r,c,u)=>{const t=[];e:for(let[e,a,o]of s){if(o)continue;let n,i=0,l=!1;for(n in e){const f=e[n];let h=r[n];if(h!==f){if(typeof h!="object"||!h)continue e;{let d,p,m=0;for(const g in h){if(f===String(h[g])){if(g!=="@initial"){const b=g.slice(1);(p=p||[]).push(b in c?c[b]:g.replace(/^@media ?/,"")),l=!0}i+=m,d=!0}++m}if(p&&p.length&&(a={["@media "+p.join(", ")]:a}),!d)continue e}}}(t[i]=t[i]||[]).push([u?"cv":`${n}-${e[n]}`,a,l])}return t},oi={},ii=ht(),ai=(s,r)=>ii(s,()=>(...c)=>{const u=()=>{for(let t of c){t=typeof t=="object"&&t||{};let e=nt(t);if(!r.rules.global.cache.has(e)){if(r.rules.global.cache.add(e),"@import"in t){let a=[].indexOf.call(r.sheet.cssRules,r.rules.themed.group)-1;for(let o of[].concat(t["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,r.sheet.insertRule(`@import ${o};`,a++);delete t["@import"]}ut(t,[],[],s,a=>{r.rules.global.apply(a)})}}return""};return lr(u,{toString:u})}),si=ht(),li=(s,r)=>si(s,()=>c=>{const u=`${Xe(s.prefix)}k-${nt(c)}`,t=()=>{if(!r.rules.global.cache.has(u)){r.rules.global.cache.add(u);const e=[];ut(c,[],[],s,o=>e.push(o));const a=`@keyframes ${u}{${e.join("")}}`;r.rules.global.apply(a)}return u};return lr(t,{get name(){return t()},toString:t})}),ci=class{constructor(s,r,c,u){this.token=s==null?"":String(s),this.value=r==null?"":String(r),this.scale=c==null?"":String(c),this.prefix=u==null?"":String(u)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Xe(this.prefix)+Xe(this.scale)+this.token}toString(){return this.computedValue}},ui=ht(),fi=(s,r)=>ui(s,()=>(c,u)=>{u=typeof c=="object"&&c||Object(u);const t=`.${c=(c=typeof c=="string"?c:"")||`${Xe(s.prefix)}t-${nt(u)}`}`,e={},a=[];for(const n in u){e[n]={};for(const i in u[n]){const l=`--${Xe(s.prefix)}${n}-${i}`,f=dn(String(u[n][i]),s.prefix,n);e[n][i]=new ci(i,f,n,s.prefix),a.push(`${l}:${f}`)}}const o=()=>{if(a.length&&!r.rules.themed.cache.has(c)){r.rules.themed.cache.add(c);const n=`${u===s.theme?":root,":""}.${c}{${a.join(";")}}`;r.rules.themed.apply(n)}return c};return{...e,get className(){return o()},selector:t,toString:o}}),di=ht(),_r,hi=ht(),pi=s=>{const r=(c=>{let u=!1;const t=di(c,e=>{u=!0;const a="prefix"in(e=typeof e=="object"&&e||{})?String(e.prefix):"",o=typeof e.media=="object"&&e.media||{},n=typeof e.root=="object"?e.root||null:globalThis.document||null,i=typeof e.theme=="object"&&e.theme||{},l={prefix:a,media:o,theme:i,themeMap:typeof e.themeMap=="object"&&e.themeMap||{...$o},utils:typeof e.utils=="object"&&e.utils||{}},f=Jo(n),h={css:Mr(l,f),globalCss:ai(l,f),keyframes:li(l,f),createTheme:fi(l,f),reset(){f.reset(),h.theme.toString()},theme:{},sheet:f,config:l,prefix:a,getCssText:f.toString,toString:f.toString};return String(h.theme=h.createTheme(i)),h});return u||t.reset(),t})(s);return r.styled=(({config:c,sheet:u})=>hi(c,()=>{const t=Mr(c,u);return(...e)=>{const a=t(...e),o=a[rt].type,n=Je.forwardRef((i,l)=>{const f=i&&i.as||o,{props:h,deferredInjector:d}=a(i);return delete h.as,h.ref=l,d?Je.createElement(Je.Fragment,null,Je.createElement(f,h),Je.createElement(d,null)):Je.createElement(f,h)});return n.className=a.className,n.displayName=`Styled.${o.displayName||o.name||o}`,n.selector=a.selector,n.toString=()=>a.selector,n[rt]=a[rt],n}}))(r),r},gi=()=>_r||(_r=pi()),he=(...s)=>gi().styled(...s);const mi=he("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),Ht=he("small",{position:"absolute",right:0,fontSize:"10px"}),ke=he("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),Fe=he("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),vi=he("div",{display:"flex"}),xi=he("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),yi=he("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),Ci=he("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),cr=he("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),bi=he("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),wi=he("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),Si=he("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),ki=he("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),Ui=he("div",{marginTop:"0"}),Er=he("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),hn=he("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),pn=he("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),Ti=he("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),Mi=he("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}});function le(s,r){if(s==null)return{};var c={},u=Object.keys(s),t,e;for(e=0;e<u.length;e++)t=u[e],!(r.indexOf(t)>=0)&&(c[t]=s[t]);return c}var Ii=["color"],gn=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Ii);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),_i=["color"],Ei=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,_i);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Fi=["color"],Li=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Fi);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Ri=["color"],ji=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Ri);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Pi=["color"],Ai=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Pi);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Di=["color"],Oi=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Di);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Bi=["color"],Gi=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Bi);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),$i=["color"],Wi=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,$i);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),zi=["color"],tr=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,zi);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Vi=["color"],Hi=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Vi);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Ni=["color"],Zi=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Ni);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Xi=["color"],qi=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Xi);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Yi=["color"],Ki=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Yi);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),Ji=["color"],Qi=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,Ji);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),ea=["color"],ta=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,ea);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),ra=["color"],na=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,ra);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),oa=["color"],ia=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,oa);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),aa=["color"],sa=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,aa);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))}),la=["color"],mn=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,la);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:u}))}),ca=["color"],vn=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,ca);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:u}))}),ua=["color"],xn=S.forwardRef(function(s,r){var c=s.color,u=c===void 0?"currentColor":c,t=le(s,ua);return S.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t,{ref:r}),S.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:u,fillRule:"evenodd",clipRule:"evenodd"}))});function fa(){var s=Object.create(null);function r(t,e){var a=t.id,o=t.name,n=t.dependencies;n===void 0&&(n=[]);var i=t.init;i===void 0&&(i=function(){});var l=t.getTransferables;if(l===void 0&&(l=null),!s[a])try{n=n.map(function(h){return h&&h.isWorkerModule&&(r(h,function(d){if(d instanceof Error)throw d}),h=s[h.id].value),h}),i=u("<"+o+">.init",i),l&&(l=u("<"+o+">.getTransferables",l));var f=null;typeof i=="function"?f=i.apply(void 0,n):console.error("worker module init function failed to rehydrate"),s[a]={id:a,value:f,getTransferables:l},e(f)}catch(h){h&&h.noLog||console.error(h),e(h)}}function c(t,e){var a,o=t.id,n=t.args;(!s[o]||typeof s[o].value!="function")&&e(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var i=(a=s[o]).value.apply(a,n);i&&typeof i.then=="function"?i.then(l,function(f){return e(f instanceof Error?f:new Error(""+f))}):l(i)}catch(f){e(f)}function l(f){try{var h=s[o].getTransferables&&s[o].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),e(f,h)}catch(d){console.error(d),e(d)}}}function u(t,e){var a=void 0;self.troikaDefine=function(n){return a=n};var o=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(n){console.error(n)}return URL.revokeObjectURL(o),delete self.troikaDefine,a}self.addEventListener("message",function(t){var e=t.data,a=e.messageId,o=e.action,n=e.data;try{o==="registerModule"&&r(n,function(i){i instanceof Error?postMessage({messageId:a,success:!1,error:i.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof i=="function"}})}),o==="callModule"&&c(n,function(i,l){i instanceof Error?postMessage({messageId:a,success:!1,error:i.message}):postMessage({messageId:a,success:!0,result:i},l||void 0)})}catch(i){postMessage({messageId:a,success:!1,error:i.stack})}})}function da(s){var r=function(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];return r._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,c);throw new Error("Worker module function was called but `init` did not return a callable function")})};return r._getInitResult=function(){var c=s.dependencies,u=s.init;c=Array.isArray(c)?c.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var t=Promise.all(c).then(function(e){return u.apply(null,e)});return r._getInitResult=function(){return t},t},r}var yn=function(){var s=!1;if(typeof window<"u"&&typeof window.document<"u")try{var r=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));r.terminate(),s=!0}catch(c){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+c.message+"]")}return yn=function(){return s},s},ha=0,pa=0,Nt=!1,Ct=Object.create(null),bt=Object.create(null),rr=Object.create(null);function pt(s){if((!s||typeof s.init!="function")&&!Nt)throw new Error("requires `options.init` function");var r=s.dependencies,c=s.init,u=s.getTransferables,t=s.workerId,e=da(s);t==null&&(t="#default");var a="workerModule"+ ++ha,o=s.name||a,n=null;r=r&&r.map(function(l){return typeof l=="function"&&!l.workerModuleData&&(Nt=!0,l=pt({workerId:t,name:"<"+o+"> function dependency: "+l.name,init:`function(){return (
`+Ft(l)+`
)}`}),Nt=!1),l&&l.workerModuleData&&(l=l.workerModuleData),l});function i(){for(var l=[],f=arguments.length;f--;)l[f]=arguments[f];if(!yn())return e.apply(void 0,l);if(!n){n=Fr(t,"registerModule",i.workerModuleData);var h=function(){n=null,bt[t].delete(h)};(bt[t]||(bt[t]=new Set)).add(h)}return n.then(function(d){var p=d.isCallable;if(p)return Fr(t,"callModule",{id:a,args:l});throw new Error("Worker module function was called but `init` did not return a callable function")})}return i.workerModuleData={isWorkerModule:!0,id:a,name:o,dependencies:r,init:Ft(c),getTransferables:u&&Ft(u)},i.onMainThread=e,i}function ga(s){bt[s]&&bt[s].forEach(function(r){r()}),Ct[s]&&(Ct[s].terminate(),delete Ct[s])}function Ft(s){var r=s.toString();return!/^function/.test(r)&&/^\w+\s*\(/.test(r)&&(r="function "+r),r}function ma(s){var r=Ct[s];if(!r){var c=Ft(fa);r=Ct[s]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+s.replace(/\*/g,"")+` **/

;(`+c+")()"],{type:"application/javascript"}))),r.onmessage=function(u){var t=u.data,e=t.messageId,a=rr[e];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete rr[e],a(t)}}return r}function Fr(s,r,c){return new Promise(function(u,t){var e=++pa;rr[e]=function(a){a.success?u(a.result):t(new Error("Error in worker "+r+" call: "+a.error))},ma(s).postMessage({messageId:e,action:r,data:c})})}const Cn=/\bvoid\s+main\s*\(\s*\)\s*{/g;function nr(s){const r=/^[ \t]*#include +<([\w\d./]+)>/gm;function c(u,t){let e=Vn[t];return e?nr(e):u}return s.replace(r,c)}const Ce=[];for(let s=0;s<256;s++)Ce[s]=(s<16?"0":"")+s.toString(16);function va(){const s=Math.random()*4294967295|0,r=Math.random()*4294967295|0,c=Math.random()*4294967295|0,u=Math.random()*4294967295|0;return(Ce[s&255]+Ce[s>>8&255]+Ce[s>>16&255]+Ce[s>>24&255]+"-"+Ce[r&255]+Ce[r>>8&255]+"-"+Ce[r>>16&15|64]+Ce[r>>24&255]+"-"+Ce[c&63|128]+Ce[c>>8&255]+"-"+Ce[c>>16&255]+Ce[c>>24&255]+Ce[u&255]+Ce[u>>8&255]+Ce[u>>16&255]+Ce[u>>24&255]).toUpperCase()}const tt=Object.assign||function(){let s=arguments[0];for(let r=1,c=arguments.length;r<c;r++){let u=arguments[r];if(u)for(let t in u)Object.prototype.hasOwnProperty.call(u,t)&&(s[t]=u[t])}return s},xa=Date.now(),Lr=new WeakMap,Rr=new Map;let ya=1e10;function or(s,r){const c=Sa(r);let u=Lr.get(s);if(u||Lr.set(s,u=Object.create(null)),u[c])return new u[c];const t=`_onBeforeCompile${c}`,e=function(i,l){s.onBeforeCompile.call(this,i,l);const f=this.customProgramCacheKey()+"|"+i.vertexShader+"|"+i.fragmentShader;let h=Rr[f];if(!h){const d=Ca(this,i,r,c);h=Rr[f]=d}i.vertexShader=h.vertexShader,i.fragmentShader=h.fragmentShader,tt(i.uniforms,this.uniforms),r.timeUniform&&(i.uniforms[r.timeUniform]={get value(){return Date.now()-xa}}),this[t]&&this[t](i)},a=function(){return o(r.chained?s:s.clone())},o=function(i){const l=Object.create(i,n);return Object.defineProperty(l,"baseMaterial",{value:s}),Object.defineProperty(l,"id",{value:ya++}),l.uuid=va(),l.uniforms=tt({},i.uniforms,r.uniforms),l.defines=tt({},i.defines,r.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${c}`]="",l.extensions=tt({},i.extensions,r.extensions),l._listeners=void 0,l},n={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>s.type,set:i=>{s.type=i}},isDerivedFrom:{writable:!0,configurable:!0,value:function(i){const l=this.baseMaterial;return i===l||l.isDerivedMaterial&&l.isDerivedFrom(i)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return s.customProgramCacheKey()+"|"+c}},onBeforeCompile:{get(){return e},set(i){this[t]=i}},copy:{writable:!0,configurable:!0,value:function(i){return s.copy.call(this,i),!s.isShaderMaterial&&!s.isDerivedMaterial&&(tt(this.extensions,i.extensions),tt(this.defines,i.defines),tt(this.uniforms,Gn.clone(i.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const i=new s.constructor;return o(i).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let i=this._depthMaterial;return i||(i=this._depthMaterial=or(s.isDerivedMaterial?s.getDepthMaterial():new $n({depthPacking:Wn}),r),i.defines.IS_DEPTH_MATERIAL="",i.uniforms=this.uniforms),i}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let i=this._distanceMaterial;return i||(i=this._distanceMaterial=or(s.isDerivedMaterial?s.getDistanceMaterial():new zn,r),i.defines.IS_DISTANCE_MATERIAL="",i.uniforms=this.uniforms),i}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:i,_distanceMaterial:l}=this;i&&i.dispose(),l&&l.dispose(),s.dispose.call(this)}}};return u[c]=a,new a}function Ca(s,{vertexShader:r,fragmentShader:c},u,t){let{vertexDefs:e,vertexMainIntro:a,vertexMainOutro:o,vertexTransform:n,fragmentDefs:i,fragmentMainIntro:l,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:d,timeUniform:p}=u;if(e=e||"",a=a||"",o=o||"",i=i||"",l=l||"",f=f||"",(n||d)&&(r=nr(r)),(h||d)&&(c=c.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),c=nr(c)),d){let m=d({vertexShader:r,fragmentShader:c});r=m.vertexShader,c=m.fragmentShader}if(h){let m=[];c=c.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(m.push(g),"")),f=`${h}
${m.join(`
`)}
${f}`}if(p){const m=`
uniform float ${p};
`;e=m+e,i=m+i}return n&&(r=`vec3 troika_position_${t};
vec3 troika_normal_${t};
vec2 troika_uv_${t};
${r}
`,e=`${e}
void troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${n}
}
`,a=`
troika_position_${t} = vec3(position);
troika_normal_${t} = vec3(normal);
troika_uv_${t} = vec2(uv);
troikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});
${a}
`,r=r.replace(/\b(position|normal|uv)\b/g,(m,g,b,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,b))?g:`troika_${g}_${t}`),s.map&&s.map.channel>0||(r=r.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),r=jr(r,t,e,a,o),c=jr(c,t,i,l,f),{vertexShader:r,fragmentShader:c}}function jr(s,r,c,u,t){return(u||t||c)&&(s=s.replace(Cn,`
${c}
void troikaOrigMain${r}() {`),s+=`
void main() {
  ${u}
  troikaOrigMain${r}();
  ${t}
}`),s}function ba(s,r){return s==="uniforms"?void 0:typeof r=="function"?r.toString():r}let wa=0;const Pr=new Map;function Sa(s){const r=JSON.stringify(s,ba);let c=Pr.get(r);return c==null&&Pr.set(r,c=++wa),c}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function ka(){return typeof window>"u"&&(self.window=self),function(s){var r={parse:function(t){var e=r._bin,a=new Uint8Array(t);if(e.readASCII(a,0,4)=="ttcf"){var o=4;e.readUshort(a,o),o+=2,e.readUshort(a,o),o+=2;var n=e.readUint(a,o);o+=4;for(var i=[],l=0;l<n;l++){var f=e.readUint(a,o);o+=4,i.push(r._readFont(a,f))}return i}return[r._readFont(a,0)]},_readFont:function(t,e){var a=r._bin,o=e;a.readFixed(t,e),e+=4;var n=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],l={_data:t,_offset:o},f={},h=0;h<n;h++){var d=a.readASCII(t,e,4);e+=4,a.readUint(t,e),e+=4;var p=a.readUint(t,e);e+=4;var m=a.readUint(t,e);e+=4,f[d]={offset:p,length:m}}for(h=0;h<i.length;h++){var g=i[h];f[g]&&(l[g.trim()]=r[g.trim()].parse(t,f[g].offset,f[g].length,l))}return l},_tabOffset:function(t,e,a){for(var o=r._bin,n=o.readUshort(t,a+4),i=a+12,l=0;l<n;l++){var f=o.readASCII(t,i,4);i+=4,o.readUint(t,i),i+=4;var h=o.readUint(t,i);if(i+=4,o.readUint(t,i),i+=4,f==e)return h}return 0}};r._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return r._bin.readShort(t,e)/16384},readInt:function(t,e){return r._bin._view(t).getInt32(e)},readInt8:function(t,e){return r._bin._view(t).getInt8(e)},readShort:function(t,e){return r._bin._view(t).getInt16(e)},readUshort:function(t,e){return r._bin._view(t).getUint16(e)},readUshorts:function(t,e,a){for(var o=[],n=0;n<a;n++)o.push(r._bin.readUshort(t,e+2*n));return o},readUint:function(t,e){return r._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*r._bin.readUint(t,e)+r._bin.readUint(t,e+4)},readASCII:function(t,e,a){for(var o="",n=0;n<a;n++)o+=String.fromCharCode(t[e+n]);return o},readUnicode:function(t,e,a){for(var o="",n=0;n<a;n++){var i=t[e++]<<8|t[e++];o+=String.fromCharCode(i)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,a){var o=r._bin._tdec;return o&&e==0&&a==t.length?o.decode(t):r._bin.readASCII(t,e,a)},readBytes:function(t,e,a){for(var o=[],n=0;n<a;n++)o.push(t[e+n]);return o},readASCIIArray:function(t,e,a){for(var o=[],n=0;n<a;n++)o.push(String.fromCharCode(t[e+n]));return o},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},r._lctf={},r._lctf.parse=function(t,e,a,o,n){var i=r._bin,l={},f=e;i.readFixed(t,e),e+=4;var h=i.readUshort(t,e);e+=2;var d=i.readUshort(t,e);e+=2;var p=i.readUshort(t,e);return e+=2,l.scriptList=r._lctf.readScriptList(t,f+h),l.featureList=r._lctf.readFeatureList(t,f+d),l.lookupList=r._lctf.readLookupList(t,f+p,n),l},r._lctf.readLookupList=function(t,e,a){var o=r._bin,n=e,i=[],l=o.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var h=o.readUshort(t,e);e+=2;var d=r._lctf.readLookupTable(t,n+h,a);i.push(d)}return i},r._lctf.readLookupTable=function(t,e,a){var o=r._bin,n=e,i={tabs:[]};i.ltype=o.readUshort(t,e),e+=2,i.flag=o.readUshort(t,e),e+=2;var l=o.readUshort(t,e);e+=2;for(var f=i.ltype,h=0;h<l;h++){var d=o.readUshort(t,e);e+=2;var p=a(t,f,n+d,i);i.tabs.push(p)}return i},r._lctf.numOfOnes=function(t){for(var e=0,a=0;a<32;a++)t>>>a&1&&e++;return e},r._lctf.readClassDef=function(t,e){var a=r._bin,o=[],n=a.readUshort(t,e);if(e+=2,n==1){var i=a.readUshort(t,e);e+=2;var l=a.readUshort(t,e);e+=2;for(var f=0;f<l;f++)o.push(i+f),o.push(i+f),o.push(a.readUshort(t,e)),e+=2}if(n==2){var h=a.readUshort(t,e);for(e+=2,f=0;f<h;f++)o.push(a.readUshort(t,e)),e+=2,o.push(a.readUshort(t,e)),e+=2,o.push(a.readUshort(t,e)),e+=2}return o},r._lctf.getInterval=function(t,e){for(var a=0;a<t.length;a+=3){var o=t[a],n=t[a+1];if(t[a+2],o<=e&&e<=n)return a}return-1},r._lctf.readCoverage=function(t,e){var a=r._bin,o={};o.fmt=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);return e+=2,o.fmt==1&&(o.tab=a.readUshorts(t,e,n)),o.fmt==2&&(o.tab=a.readUshorts(t,e,3*n)),o},r._lctf.coverageIndex=function(t,e){var a=t.tab;if(t.fmt==1)return a.indexOf(e);if(t.fmt==2){var o=r._lctf.getInterval(a,e);if(o!=-1)return a[o+2]+(e-a[o])}return-1},r._lctf.readFeatureList=function(t,e){var a=r._bin,o=e,n=[],i=a.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var f=a.readASCII(t,e,4);e+=4;var h=a.readUshort(t,e);e+=2;var d=r._lctf.readFeatureTable(t,o+h);d.tag=f.trim(),n.push(d)}return n},r._lctf.readFeatureTable=function(t,e){var a=r._bin,o=e,n={},i=a.readUshort(t,e);e+=2,i>0&&(n.featureParams=o+i);var l=a.readUshort(t,e);e+=2,n.tab=[];for(var f=0;f<l;f++)n.tab.push(a.readUshort(t,e+2*f));return n},r._lctf.readScriptList=function(t,e){var a=r._bin,o=e,n={},i=a.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var f=a.readASCII(t,e,4);e+=4;var h=a.readUshort(t,e);e+=2,n[f.trim()]=r._lctf.readScriptTable(t,o+h)}return n},r._lctf.readScriptTable=function(t,e){var a=r._bin,o=e,n={},i=a.readUshort(t,e);e+=2,i>0&&(n.default=r._lctf.readLangSysTable(t,o+i));var l=a.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var h=a.readASCII(t,e,4);e+=4;var d=a.readUshort(t,e);e+=2,n[h.trim()]=r._lctf.readLangSysTable(t,o+d)}return n},r._lctf.readLangSysTable=function(t,e){var a=r._bin,o={};a.readUshort(t,e),e+=2,o.reqFeature=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);return e+=2,o.features=a.readUshorts(t,e,n),o},r.CFF={},r.CFF.parse=function(t,e,a){var o=r._bin;(t=new Uint8Array(t.buffer,e,a))[e=0],t[++e],t[++e],t[++e],e++;var n=[];e=r.CFF.readIndex(t,e,n);for(var i=[],l=0;l<n.length-1;l++)i.push(o.readASCII(t,e+n[l],n[l+1]-n[l]));e+=n[n.length-1];var f=[];e=r.CFF.readIndex(t,e,f);var h=[];for(l=0;l<f.length-1;l++)h.push(r.CFF.readDict(t,e+f[l],e+f[l+1]));e+=f[f.length-1];var d=h[0],p=[];e=r.CFF.readIndex(t,e,p);var m=[];for(l=0;l<p.length-1;l++)m.push(o.readASCII(t,e+p[l],p[l+1]-p[l]));if(e+=p[p.length-1],r.CFF.readSubrs(t,e,d),d.CharStrings){e=d.CharStrings,p=[],e=r.CFF.readIndex(t,e,p);var g=[];for(l=0;l<p.length-1;l++)g.push(o.readBytes(t,e+p[l],p[l+1]-p[l]));d.CharStrings=g}if(d.ROS){e=d.FDArray;var b=[];for(e=r.CFF.readIndex(t,e,b),d.FDArray=[],l=0;l<b.length-1;l++){var x=r.CFF.readDict(t,e+b[l],e+b[l+1]);r.CFF._readFDict(t,x,m),d.FDArray.push(x)}e+=b[b.length-1],e=d.FDSelect,d.FDSelect=[];var y=t[e];if(e++,y!=3)throw y;var C=o.readUshort(t,e);for(e+=2,l=0;l<C+1;l++)d.FDSelect.push(o.readUshort(t,e),t[e+2]),e+=3}return d.Encoding&&(d.Encoding=r.CFF.readEncoding(t,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=r.CFF.readCharset(t,d.charset,d.CharStrings.length)),r.CFF._readFDict(t,d,m),d},r.CFF._readFDict=function(t,e,a){var o;for(var n in e.Private&&(o=e.Private[1],e.Private=r.CFF.readDict(t,o,o+e.Private[0]),e.Private.Subrs&&r.CFF.readSubrs(t,o+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(n)!=-1&&(e[n]=a[e[n]-426+35])},r.CFF.readSubrs=function(t,e,a){var o=r._bin,n=[];e=r.CFF.readIndex(t,e,n);var i,l=n.length;i=l<1240?107:l<33900?1131:32768,a.Bias=i,a.Subrs=[];for(var f=0;f<n.length-1;f++)a.Subrs.push(o.readBytes(t,e+n[f],n[f+1]-n[f]))},r.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],r.CFF.glyphByUnicode=function(t,e){for(var a=0;a<t.charset.length;a++)if(t.charset[a]==e)return a;return-1},r.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:r.CFF.glyphByUnicode(t,r.CFF.tableSE[e])},r.CFF.readEncoding=function(t,e,a){r._bin;var o=[".notdef"],n=t[e];if(e++,n!=0)throw"error: unknown encoding format: "+n;var i=t[e];e++;for(var l=0;l<i;l++)o.push(t[e+l]);return o},r.CFF.readCharset=function(t,e,a){var o=r._bin,n=[".notdef"],i=t[e];if(e++,i==0)for(var l=0;l<a;l++){var f=o.readUshort(t,e);e+=2,n.push(f)}else{if(i!=1&&i!=2)throw"error: format: "+i;for(;n.length<a;){f=o.readUshort(t,e),e+=2;var h=0;for(i==1?(h=t[e],e++):(h=o.readUshort(t,e),e+=2),l=0;l<=h;l++)n.push(f),f++}}return n},r.CFF.readIndex=function(t,e,a){var o=r._bin,n=o.readUshort(t,e)+1,i=t[e+=2];if(e++,i==1)for(var l=0;l<n;l++)a.push(t[e+l]);else if(i==2)for(l=0;l<n;l++)a.push(o.readUshort(t,e+2*l));else if(i==3)for(l=0;l<n;l++)a.push(16777215&o.readUint(t,e+3*l-1));else if(n!=1)throw"unsupported offset size: "+i+", count: "+n;return(e+=n*i)-1},r.CFF.getCharString=function(t,e,a){var o=r._bin,n=t[e],i=t[e+1];t[e+2],t[e+3],t[e+4];var l=1,f=null,h=null;n<=20&&(f=n,l=1),n==12&&(f=100*n+i,l=2),21<=n&&n<=27&&(f=n,l=1),n==28&&(h=o.readShort(t,e+1),l=3),29<=n&&n<=31&&(f=n,l=1),32<=n&&n<=246&&(h=n-139,l=1),247<=n&&n<=250&&(h=256*(n-247)+i+108,l=2),251<=n&&n<=254&&(h=256*-(n-251)-i-108,l=2),n==255&&(h=o.readInt(t,e+1)/65535,l=5),a.val=h??"o"+f,a.size=l},r.CFF.readCharString=function(t,e,a){for(var o=e+a,n=r._bin,i=[];e<o;){var l=t[e],f=t[e+1];t[e+2],t[e+3],t[e+4];var h=1,d=null,p=null;l<=20&&(d=l,h=1),l==12&&(d=100*l+f,h=2),l!=19&&l!=20||(d=l,h=2),21<=l&&l<=27&&(d=l,h=1),l==28&&(p=n.readShort(t,e+1),h=3),29<=l&&l<=31&&(d=l,h=1),32<=l&&l<=246&&(p=l-139,h=1),247<=l&&l<=250&&(p=256*(l-247)+f+108,h=2),251<=l&&l<=254&&(p=256*-(l-251)-f-108,h=2),l==255&&(p=n.readInt(t,e+1)/65535,h=5),i.push(p??"o"+d),e+=h}return i},r.CFF.readDict=function(t,e,a){for(var o=r._bin,n={},i=[];e<a;){var l=t[e],f=t[e+1];t[e+2],t[e+3],t[e+4];var h=1,d=null,p=null;if(l==28&&(p=o.readShort(t,e+1),h=3),l==29&&(p=o.readInt(t,e+1),h=5),32<=l&&l<=246&&(p=l-139,h=1),247<=l&&l<=250&&(p=256*(l-247)+f+108,h=2),251<=l&&l<=254&&(p=256*-(l-251)-f-108,h=2),l==255)throw p=o.readInt(t,e+1)/65535,h=5,"unknown number";if(l==30){var m=[];for(h=1;;){var g=t[e+h];h++;var b=g>>4,x=15&g;if(b!=15&&m.push(b),x!=15&&m.push(x),x==15)break}for(var y="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],w=0;w<m.length;w++)y+=C[m[w]];p=parseFloat(y)}l<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][l],h=1,l==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(n[d]=i.length==1?i[0]:i,i=[]):i.push(p),e+=h}return n},r.cmap={},r.cmap.parse=function(t,e,a){t=new Uint8Array(t.buffer,e,a),e=0;var o=r._bin,n={};o.readUshort(t,e),e+=2;var i=o.readUshort(t,e);e+=2;var l=[];n.tables=[];for(var f=0;f<i;f++){var h=o.readUshort(t,e);e+=2;var d=o.readUshort(t,e);e+=2;var p=o.readUint(t,e);e+=4;var m="p"+h+"e"+d,g=l.indexOf(p);if(g==-1){var b;g=n.tables.length,l.push(p);var x=o.readUshort(t,p);x==0?b=r.cmap.parse0(t,p):x==4?b=r.cmap.parse4(t,p):x==6?b=r.cmap.parse6(t,p):x==12?b=r.cmap.parse12(t,p):console.debug("unknown format: "+x,h,d,p),n.tables.push(b)}if(n[m]!=null)throw"multiple tables for one platform+encoding";n[m]=g}return n},r.cmap.parse0=function(t,e){var a=r._bin,o={};o.format=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,o.map=[];for(var i=0;i<n-6;i++)o.map.push(t[e+i]);return o},r.cmap.parse4=function(t,e){var a=r._bin,o=e,n={};n.format=a.readUshort(t,e),e+=2;var i=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2;var l=a.readUshort(t,e);e+=2;var f=l/2;n.searchRange=a.readUshort(t,e),e+=2,n.entrySelector=a.readUshort(t,e),e+=2,n.rangeShift=a.readUshort(t,e),e+=2,n.endCount=a.readUshorts(t,e,f),e+=2*f,e+=2,n.startCount=a.readUshorts(t,e,f),e+=2*f,n.idDelta=[];for(var h=0;h<f;h++)n.idDelta.push(a.readShort(t,e)),e+=2;for(n.idRangeOffset=a.readUshorts(t,e,f),e+=2*f,n.glyphIdArray=[];e<o+i;)n.glyphIdArray.push(a.readUshort(t,e)),e+=2;return n},r.cmap.parse6=function(t,e){var a=r._bin,o={};o.format=a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,o.firstCode=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);e+=2,o.glyphIdArray=[];for(var i=0;i<n;i++)o.glyphIdArray.push(a.readUshort(t,e)),e+=2;return o},r.cmap.parse12=function(t,e){var a=r._bin,o={};o.format=a.readUshort(t,e),e+=2,e+=2,a.readUint(t,e),e+=4,a.readUint(t,e),e+=4;var n=a.readUint(t,e);e+=4,o.groups=[];for(var i=0;i<n;i++){var l=e+12*i,f=a.readUint(t,l+0),h=a.readUint(t,l+4),d=a.readUint(t,l+8);o.groups.push([f,h,d])}return o},r.glyf={},r.glyf.parse=function(t,e,a,o){for(var n=[],i=0;i<o.maxp.numGlyphs;i++)n.push(null);return n},r.glyf._parseGlyf=function(t,e){var a=r._bin,o=t._data,n=r._tabOffset(o,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var i={};if(i.noc=a.readShort(o,n),n+=2,i.xMin=a.readShort(o,n),n+=2,i.yMin=a.readShort(o,n),n+=2,i.xMax=a.readShort(o,n),n+=2,i.yMax=a.readShort(o,n),n+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var l=0;l<i.noc;l++)i.endPts.push(a.readUshort(o,n)),n+=2;var f=a.readUshort(o,n);if(n+=2,o.length-n<f)return null;i.instructions=a.readBytes(o,n,f),n+=f;var h=i.endPts[i.noc-1]+1;for(i.flags=[],l=0;l<h;l++){var d=o[n];if(n++,i.flags.push(d),(8&d)!=0){var p=o[n];n++;for(var m=0;m<p;m++)i.flags.push(d),l++}}for(i.xs=[],l=0;l<h;l++){var g=(2&i.flags[l])!=0,b=(16&i.flags[l])!=0;g?(i.xs.push(b?o[n]:-o[n]),n++):b?i.xs.push(0):(i.xs.push(a.readShort(o,n)),n+=2)}for(i.ys=[],l=0;l<h;l++)g=(4&i.flags[l])!=0,b=(32&i.flags[l])!=0,g?(i.ys.push(b?o[n]:-o[n]),n++):b?i.ys.push(0):(i.ys.push(a.readShort(o,n)),n+=2);var x=0,y=0;for(l=0;l<h;l++)x+=i.xs[l],y+=i.ys[l],i.xs[l]=x,i.ys[l]=y}else{var C;i.parts=[];do{C=a.readUshort(o,n),n+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(w),w.glyphIndex=a.readUshort(o,n),n+=2,1&C){var U=a.readShort(o,n);n+=2;var T=a.readShort(o,n);n+=2}else U=a.readInt8(o,n),n++,T=a.readInt8(o,n),n++;2&C?(w.m.tx=U,w.m.ty=T):(w.p1=U,w.p2=T),8&C?(w.m.a=w.m.d=a.readF2dot14(o,n),n+=2):64&C?(w.m.a=a.readF2dot14(o,n),n+=2,w.m.d=a.readF2dot14(o,n),n+=2):128&C&&(w.m.a=a.readF2dot14(o,n),n+=2,w.m.b=a.readF2dot14(o,n),n+=2,w.m.c=a.readF2dot14(o,n),n+=2,w.m.d=a.readF2dot14(o,n),n+=2)}while(32&C);if(256&C){var M=a.readUshort(o,n);for(n+=2,i.instr=[],l=0;l<M;l++)i.instr.push(o[n]),n++}}return i},r.GDEF={},r.GDEF.parse=function(t,e,a,o){var n=e;e+=4;var i=r._bin.readUshort(t,e);return{glyphClassDef:i===0?null:r._lctf.readClassDef(t,n+i)}},r.GPOS={},r.GPOS.parse=function(t,e,a,o){return r._lctf.parse(t,e,a,o,r.GPOS.subt)},r.GPOS.subt=function(t,e,a,o){var n=r._bin,i=a,l={};if(l.fmt=n.readUshort(t,a),a+=2,e==1||e==2||e==3||e==7||e==8&&l.fmt<=2){var f=n.readUshort(t,a);a+=2,l.coverage=r._lctf.readCoverage(t,f+i)}if(e==1&&l.fmt==1){var h=n.readUshort(t,a);a+=2,h!=0&&(l.pos=r.GPOS.readValueRecord(t,a,h))}else if(e==2&&l.fmt>=1&&l.fmt<=2){h=n.readUshort(t,a),a+=2;var d=n.readUshort(t,a);a+=2;var p=r._lctf.numOfOnes(h),m=r._lctf.numOfOnes(d);if(l.fmt==1){l.pairsets=[];var g=n.readUshort(t,a);a+=2;for(var b=0;b<g;b++){var x=i+n.readUshort(t,a);a+=2;var y=n.readUshort(t,x);x+=2;for(var C=[],w=0;w<y;w++){var U=n.readUshort(t,x);x+=2,h!=0&&(k=r.GPOS.readValueRecord(t,x,h),x+=2*p),d!=0&&(E=r.GPOS.readValueRecord(t,x,d),x+=2*m),C.push({gid2:U,val1:k,val2:E})}l.pairsets.push(C)}}if(l.fmt==2){var T=n.readUshort(t,a);a+=2;var M=n.readUshort(t,a);a+=2;var L=n.readUshort(t,a);a+=2;var I=n.readUshort(t,a);for(a+=2,l.classDef1=r._lctf.readClassDef(t,i+T),l.classDef2=r._lctf.readClassDef(t,i+M),l.matrix=[],b=0;b<L;b++){var G=[];for(w=0;w<I;w++){var k=null,E=null;h!=0&&(k=r.GPOS.readValueRecord(t,a,h),a+=2*p),d!=0&&(E=r.GPOS.readValueRecord(t,a,d),a+=2*m),G.push({val1:k,val2:E})}l.matrix.push(G)}}}else if(e==4&&l.fmt==1)l.markCoverage=r._lctf.readCoverage(t,n.readUshort(t,a)+i),l.baseCoverage=r._lctf.readCoverage(t,n.readUshort(t,a+2)+i),l.markClassCount=n.readUshort(t,a+4),l.markArray=r.GPOS.readMarkArray(t,n.readUshort(t,a+6)+i),l.baseArray=r.GPOS.readBaseArray(t,n.readUshort(t,a+8)+i,l.markClassCount);else if(e==6&&l.fmt==1)l.mark1Coverage=r._lctf.readCoverage(t,n.readUshort(t,a)+i),l.mark2Coverage=r._lctf.readCoverage(t,n.readUshort(t,a+2)+i),l.markClassCount=n.readUshort(t,a+4),l.mark1Array=r.GPOS.readMarkArray(t,n.readUshort(t,a+6)+i),l.mark2Array=r.GPOS.readBaseArray(t,n.readUshort(t,a+8)+i,l.markClassCount);else{if(e==9&&l.fmt==1){var _=n.readUshort(t,a);a+=2;var A=n.readUint(t,a);if(a+=4,o.ltype==9)o.ltype=_;else if(o.ltype!=_)throw"invalid extension substitution";return r.GPOS.subt(t,o.ltype,i+A)}console.debug("unsupported GPOS table LookupType",e,"format",l.fmt)}return l},r.GPOS.readValueRecord=function(t,e,a){var o=r._bin,n=[];return n.push(1&a?o.readShort(t,e):0),e+=1&a?2:0,n.push(2&a?o.readShort(t,e):0),e+=2&a?2:0,n.push(4&a?o.readShort(t,e):0),e+=4&a?2:0,n.push(8&a?o.readShort(t,e):0),e+=8&a?2:0,n},r.GPOS.readBaseArray=function(t,e,a){var o=r._bin,n=[],i=e,l=o.readUshort(t,e);e+=2;for(var f=0;f<l;f++){for(var h=[],d=0;d<a;d++)h.push(r.GPOS.readAnchorRecord(t,i+o.readUshort(t,e))),e+=2;n.push(h)}return n},r.GPOS.readMarkArray=function(t,e){var a=r._bin,o=[],n=e,i=a.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var f=r.GPOS.readAnchorRecord(t,a.readUshort(t,e+2)+n);f.markClass=a.readUshort(t,e),o.push(f),e+=4}return o},r.GPOS.readAnchorRecord=function(t,e){var a=r._bin,o={};return o.fmt=a.readUshort(t,e),o.x=a.readShort(t,e+2),o.y=a.readShort(t,e+4),o},r.GSUB={},r.GSUB.parse=function(t,e,a,o){return r._lctf.parse(t,e,a,o,r.GSUB.subt)},r.GSUB.subt=function(t,e,a,o){var n=r._bin,i=a,l={};if(l.fmt=n.readUshort(t,a),a+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&l.fmt<=2||e==6&&l.fmt<=2){var f=n.readUshort(t,a);a+=2,l.coverage=r._lctf.readCoverage(t,i+f)}if(e==1&&l.fmt>=1&&l.fmt<=2){if(l.fmt==1)l.delta=n.readShort(t,a),a+=2;else if(l.fmt==2){var h=n.readUshort(t,a);a+=2,l.newg=n.readUshorts(t,a,h),a+=2*l.newg.length}}else if(e==2&&l.fmt==1){h=n.readUshort(t,a),a+=2,l.seqs=[];for(var d=0;d<h;d++){var p=n.readUshort(t,a)+i;a+=2;var m=n.readUshort(t,p);l.seqs.push(n.readUshorts(t,p+2,m))}}else if(e==4)for(l.vals=[],h=n.readUshort(t,a),a+=2,d=0;d<h;d++){var g=n.readUshort(t,a);a+=2,l.vals.push(r.GSUB.readLigatureSet(t,i+g))}else if(e==5&&l.fmt==2){if(l.fmt==2){var b=n.readUshort(t,a);a+=2,l.cDef=r._lctf.readClassDef(t,i+b),l.scset=[];var x=n.readUshort(t,a);for(a+=2,d=0;d<x;d++){var y=n.readUshort(t,a);a+=2,l.scset.push(y==0?null:r.GSUB.readSubClassSet(t,i+y))}}}else if(e==6&&l.fmt==3){if(l.fmt==3){for(d=0;d<3;d++){h=n.readUshort(t,a),a+=2;for(var C=[],w=0;w<h;w++)C.push(r._lctf.readCoverage(t,i+n.readUshort(t,a+2*w)));a+=2*h,d==0&&(l.backCvg=C),d==1&&(l.inptCvg=C),d==2&&(l.ahedCvg=C)}h=n.readUshort(t,a),a+=2,l.lookupRec=r.GSUB.readSubstLookupRecords(t,a,h)}}else{if(e==7&&l.fmt==1){var U=n.readUshort(t,a);a+=2;var T=n.readUint(t,a);if(a+=4,o.ltype==9)o.ltype=U;else if(o.ltype!=U)throw"invalid extension substitution";return r.GSUB.subt(t,o.ltype,i+T)}console.debug("unsupported GSUB table LookupType",e,"format",l.fmt)}return l},r.GSUB.readSubClassSet=function(t,e){var a=r._bin.readUshort,o=e,n=[],i=a(t,e);e+=2;for(var l=0;l<i;l++){var f=a(t,e);e+=2,n.push(r.GSUB.readSubClassRule(t,o+f))}return n},r.GSUB.readSubClassRule=function(t,e){var a=r._bin.readUshort,o={},n=a(t,e),i=a(t,e+=2);e+=2,o.input=[];for(var l=0;l<n-1;l++)o.input.push(a(t,e)),e+=2;return o.substLookupRecords=r.GSUB.readSubstLookupRecords(t,e,i),o},r.GSUB.readSubstLookupRecords=function(t,e,a){for(var o=r._bin.readUshort,n=[],i=0;i<a;i++)n.push(o(t,e),o(t,e+2)),e+=4;return n},r.GSUB.readChainSubClassSet=function(t,e){var a=r._bin,o=e,n=[],i=a.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var f=a.readUshort(t,e);e+=2,n.push(r.GSUB.readChainSubClassRule(t,o+f))}return n},r.GSUB.readChainSubClassRule=function(t,e){for(var a=r._bin,o={},n=["backtrack","input","lookahead"],i=0;i<n.length;i++){var l=a.readUshort(t,e);e+=2,i==1&&l--,o[n[i]]=a.readUshorts(t,e,l),e+=2*o[n[i]].length}return l=a.readUshort(t,e),e+=2,o.subst=a.readUshorts(t,e,2*l),e+=2*o.subst.length,o},r.GSUB.readLigatureSet=function(t,e){var a=r._bin,o=e,n=[],i=a.readUshort(t,e);e+=2;for(var l=0;l<i;l++){var f=a.readUshort(t,e);e+=2,n.push(r.GSUB.readLigature(t,o+f))}return n},r.GSUB.readLigature=function(t,e){var a=r._bin,o={chain:[]};o.nglyph=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);e+=2;for(var i=0;i<n-1;i++)o.chain.push(a.readUshort(t,e)),e+=2;return o},r.head={},r.head.parse=function(t,e,a){var o=r._bin,n={};return o.readFixed(t,e),e+=4,n.fontRevision=o.readFixed(t,e),e+=4,o.readUint(t,e),e+=4,o.readUint(t,e),e+=4,n.flags=o.readUshort(t,e),e+=2,n.unitsPerEm=o.readUshort(t,e),e+=2,n.created=o.readUint64(t,e),e+=8,n.modified=o.readUint64(t,e),e+=8,n.xMin=o.readShort(t,e),e+=2,n.yMin=o.readShort(t,e),e+=2,n.xMax=o.readShort(t,e),e+=2,n.yMax=o.readShort(t,e),e+=2,n.macStyle=o.readUshort(t,e),e+=2,n.lowestRecPPEM=o.readUshort(t,e),e+=2,n.fontDirectionHint=o.readShort(t,e),e+=2,n.indexToLocFormat=o.readShort(t,e),e+=2,n.glyphDataFormat=o.readShort(t,e),e+=2,n},r.hhea={},r.hhea.parse=function(t,e,a){var o=r._bin,n={};return o.readFixed(t,e),e+=4,n.ascender=o.readShort(t,e),e+=2,n.descender=o.readShort(t,e),e+=2,n.lineGap=o.readShort(t,e),e+=2,n.advanceWidthMax=o.readUshort(t,e),e+=2,n.minLeftSideBearing=o.readShort(t,e),e+=2,n.minRightSideBearing=o.readShort(t,e),e+=2,n.xMaxExtent=o.readShort(t,e),e+=2,n.caretSlopeRise=o.readShort(t,e),e+=2,n.caretSlopeRun=o.readShort(t,e),e+=2,n.caretOffset=o.readShort(t,e),e+=2,e+=8,n.metricDataFormat=o.readShort(t,e),e+=2,n.numberOfHMetrics=o.readUshort(t,e),e+=2,n},r.hmtx={},r.hmtx.parse=function(t,e,a,o){for(var n=r._bin,i={aWidth:[],lsBearing:[]},l=0,f=0,h=0;h<o.maxp.numGlyphs;h++)h<o.hhea.numberOfHMetrics&&(l=n.readUshort(t,e),e+=2,f=n.readShort(t,e),e+=2),i.aWidth.push(l),i.lsBearing.push(f);return i},r.kern={},r.kern.parse=function(t,e,a,o){var n=r._bin,i=n.readUshort(t,e);if(e+=2,i==1)return r.kern.parseV1(t,e-2,a,o);var l=n.readUshort(t,e);e+=2;for(var f={glyph1:[],rval:[]},h=0;h<l;h++){e+=2,a=n.readUshort(t,e),e+=2;var d=n.readUshort(t,e);e+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;e=r.kern.readFormat0(t,e,f)}return f},r.kern.parseV1=function(t,e,a,o){var n=r._bin;n.readFixed(t,e),e+=4;var i=n.readUint(t,e);e+=4;for(var l={glyph1:[],rval:[]},f=0;f<i;f++){n.readUint(t,e),e+=4;var h=n.readUshort(t,e);e+=2,n.readUshort(t,e),e+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;e=r.kern.readFormat0(t,e,l)}return l},r.kern.readFormat0=function(t,e,a){var o=r._bin,n=-1,i=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2;for(var l=0;l<i;l++){var f=o.readUshort(t,e);e+=2;var h=o.readUshort(t,e);e+=2;var d=o.readShort(t,e);e+=2,f!=n&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var p=a.rval[a.rval.length-1];p.glyph2.push(h),p.vals.push(d),n=f}return e},r.loca={},r.loca.parse=function(t,e,a,o){var n=r._bin,i=[],l=o.head.indexToLocFormat,f=o.maxp.numGlyphs+1;if(l==0)for(var h=0;h<f;h++)i.push(n.readUshort(t,e+(h<<1))<<1);if(l==1)for(h=0;h<f;h++)i.push(n.readUint(t,e+(h<<2)));return i},r.maxp={},r.maxp.parse=function(t,e,a){var o=r._bin,n={},i=o.readUint(t,e);return e+=4,n.numGlyphs=o.readUshort(t,e),e+=2,i==65536&&(n.maxPoints=o.readUshort(t,e),e+=2,n.maxContours=o.readUshort(t,e),e+=2,n.maxCompositePoints=o.readUshort(t,e),e+=2,n.maxCompositeContours=o.readUshort(t,e),e+=2,n.maxZones=o.readUshort(t,e),e+=2,n.maxTwilightPoints=o.readUshort(t,e),e+=2,n.maxStorage=o.readUshort(t,e),e+=2,n.maxFunctionDefs=o.readUshort(t,e),e+=2,n.maxInstructionDefs=o.readUshort(t,e),e+=2,n.maxStackElements=o.readUshort(t,e),e+=2,n.maxSizeOfInstructions=o.readUshort(t,e),e+=2,n.maxComponentElements=o.readUshort(t,e),e+=2,n.maxComponentDepth=o.readUshort(t,e),e+=2),n},r.name={},r.name.parse=function(t,e,a){var o=r._bin,n={};o.readUshort(t,e),e+=2;var i=o.readUshort(t,e);e+=2,o.readUshort(t,e);for(var l,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=e+=2,d=0;d<i;d++){var p=o.readUshort(t,e);e+=2;var m=o.readUshort(t,e);e+=2;var g=o.readUshort(t,e);e+=2;var b=o.readUshort(t,e);e+=2;var x=o.readUshort(t,e);e+=2;var y=o.readUshort(t,e);e+=2;var C,w=f[b],U=h+12*i+y;if(p==0)C=o.readUnicode(t,U,x/2);else if(p==3&&m==0)C=o.readUnicode(t,U,x/2);else if(m==0)C=o.readASCII(t,U,x);else if(m==1)C=o.readUnicode(t,U,x/2);else if(m==3)C=o.readUnicode(t,U,x/2);else{if(p!=1)throw"unknown encoding "+m+", platformID: "+p;C=o.readASCII(t,U,x),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var T="p"+p+","+g.toString(16);n[T]==null&&(n[T]={}),n[T][w!==void 0?w:b]=C,n[T]._lang=g}for(var M in n)if(n[M].postScriptName!=null&&n[M]._lang==1033)return n[M];for(var M in n)if(n[M].postScriptName!=null&&n[M]._lang==0)return n[M];for(var M in n)if(n[M].postScriptName!=null&&n[M]._lang==3084)return n[M];for(var M in n)if(n[M].postScriptName!=null)return n[M];for(var M in n){l=M;break}return console.debug("returning name table with languageID "+n[l]._lang),n[l]},r["OS/2"]={},r["OS/2"].parse=function(t,e,a){var o=r._bin.readUshort(t,e);e+=2;var n={};if(o==0)r["OS/2"].version0(t,e,n);else if(o==1)r["OS/2"].version1(t,e,n);else if(o==2||o==3||o==4)r["OS/2"].version2(t,e,n);else{if(o!=5)throw"unknown OS/2 table version: "+o;r["OS/2"].version5(t,e,n)}return n},r["OS/2"].version0=function(t,e,a){var o=r._bin;return a.xAvgCharWidth=o.readShort(t,e),e+=2,a.usWeightClass=o.readUshort(t,e),e+=2,a.usWidthClass=o.readUshort(t,e),e+=2,a.fsType=o.readUshort(t,e),e+=2,a.ySubscriptXSize=o.readShort(t,e),e+=2,a.ySubscriptYSize=o.readShort(t,e),e+=2,a.ySubscriptXOffset=o.readShort(t,e),e+=2,a.ySubscriptYOffset=o.readShort(t,e),e+=2,a.ySuperscriptXSize=o.readShort(t,e),e+=2,a.ySuperscriptYSize=o.readShort(t,e),e+=2,a.ySuperscriptXOffset=o.readShort(t,e),e+=2,a.ySuperscriptYOffset=o.readShort(t,e),e+=2,a.yStrikeoutSize=o.readShort(t,e),e+=2,a.yStrikeoutPosition=o.readShort(t,e),e+=2,a.sFamilyClass=o.readShort(t,e),e+=2,a.panose=o.readBytes(t,e,10),e+=10,a.ulUnicodeRange1=o.readUint(t,e),e+=4,a.ulUnicodeRange2=o.readUint(t,e),e+=4,a.ulUnicodeRange3=o.readUint(t,e),e+=4,a.ulUnicodeRange4=o.readUint(t,e),e+=4,a.achVendID=[o.readInt8(t,e),o.readInt8(t,e+1),o.readInt8(t,e+2),o.readInt8(t,e+3)],e+=4,a.fsSelection=o.readUshort(t,e),e+=2,a.usFirstCharIndex=o.readUshort(t,e),e+=2,a.usLastCharIndex=o.readUshort(t,e),e+=2,a.sTypoAscender=o.readShort(t,e),e+=2,a.sTypoDescender=o.readShort(t,e),e+=2,a.sTypoLineGap=o.readShort(t,e),e+=2,a.usWinAscent=o.readUshort(t,e),e+=2,a.usWinDescent=o.readUshort(t,e),e+=2},r["OS/2"].version1=function(t,e,a){var o=r._bin;return e=r["OS/2"].version0(t,e,a),a.ulCodePageRange1=o.readUint(t,e),e+=4,a.ulCodePageRange2=o.readUint(t,e),e+=4},r["OS/2"].version2=function(t,e,a){var o=r._bin;return e=r["OS/2"].version1(t,e,a),a.sxHeight=o.readShort(t,e),e+=2,a.sCapHeight=o.readShort(t,e),e+=2,a.usDefault=o.readUshort(t,e),e+=2,a.usBreak=o.readUshort(t,e),e+=2,a.usMaxContext=o.readUshort(t,e),e+=2},r["OS/2"].version5=function(t,e,a){var o=r._bin;return e=r["OS/2"].version2(t,e,a),a.usLowerOpticalPointSize=o.readUshort(t,e),e+=2,a.usUpperOpticalPointSize=o.readUshort(t,e),e+=2},r.post={},r.post.parse=function(t,e,a){var o=r._bin,n={};return n.version=o.readFixed(t,e),e+=4,n.italicAngle=o.readFixed(t,e),e+=4,n.underlinePosition=o.readShort(t,e),e+=2,n.underlineThickness=o.readShort(t,e),e+=2,n},r==null&&(r={}),r.U==null&&(r.U={}),r.U.codeToGlyph=function(t,e){var a=t.cmap,o=-1;if(a.p0e4!=null?o=a.p0e4:a.p3e1!=null?o=a.p3e1:a.p1e0!=null?o=a.p1e0:a.p0e3!=null&&(o=a.p0e3),o==-1)throw"no familiar platform and encoding!";var n=a.tables[o];if(n.format==0)return e>=n.map.length?0:n.map[e];if(n.format==4){for(var i=-1,l=0;l<n.endCount.length;l++)if(e<=n.endCount[l]){i=l;break}return i==-1||n.startCount[i]>e?0:65535&(n.idRangeOffset[i]!=0?n.glyphIdArray[e-n.startCount[i]+(n.idRangeOffset[i]>>1)-(n.idRangeOffset.length-i)]:e+n.idDelta[i])}if(n.format==12){if(e>n.groups[n.groups.length-1][1])return 0;for(l=0;l<n.groups.length;l++){var f=n.groups[l];if(f[0]<=e&&e<=f[1])return f[2]+(e-f[0])}return 0}throw"unknown cmap table format "+n.format},r.U.glyphToPath=function(t,e){var a={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var o=t.SVG.entries[e];return o==null?a:(typeof o=="string"&&(o=r.SVG.toPath(o),t.SVG.entries[e]=o),o)}if(t.CFF){var n={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},i=t.CFF,l=t.CFF.Private;if(i.ROS){for(var f=0;i.FDSelect[f+2]<=e;)f+=2;l=i.FDArray[i.FDSelect[f+1]].Private}r.U._drawCFF(t.CFF.CharStrings[e],n,i,l,a)}else t.glyf&&r.U._drawGlyf(e,t,a);return a},r.U._drawGlyf=function(t,e,a){var o=e.glyf[t];o==null&&(o=e.glyf[t]=r.glyf._parseGlyf(e,t)),o!=null&&(o.noc>-1?r.U._simpleGlyph(o,a):r.U._compoGlyph(o,e,a))},r.U._simpleGlyph=function(t,e){for(var a=0;a<t.noc;a++){for(var o=a==0?0:t.endPts[a-1]+1,n=t.endPts[a],i=o;i<=n;i++){var l=i==o?n:i-1,f=i==n?o:i+1,h=1&t.flags[i],d=1&t.flags[l],p=1&t.flags[f],m=t.xs[i],g=t.ys[i];if(i==o)if(h){if(!d){r.U.P.moveTo(e,m,g);continue}r.U.P.moveTo(e,t.xs[l],t.ys[l])}else d?r.U.P.moveTo(e,t.xs[l],t.ys[l]):r.U.P.moveTo(e,(t.xs[l]+m)/2,(t.ys[l]+g)/2);h?d&&r.U.P.lineTo(e,m,g):p?r.U.P.qcurveTo(e,m,g,t.xs[f],t.ys[f]):r.U.P.qcurveTo(e,m,g,(m+t.xs[f])/2,(g+t.ys[f])/2)}r.U.P.closePath(e)}},r.U._compoGlyph=function(t,e,a){for(var o=0;o<t.parts.length;o++){var n={cmds:[],crds:[]},i=t.parts[o];r.U._drawGlyf(i.glyphIndex,e,n);for(var l=i.m,f=0;f<n.crds.length;f+=2){var h=n.crds[f],d=n.crds[f+1];a.crds.push(h*l.a+d*l.b+l.tx),a.crds.push(h*l.c+d*l.d+l.ty)}for(f=0;f<n.cmds.length;f++)a.cmds.push(n.cmds[f])}},r.U._getGlyphClass=function(t,e){var a=r._lctf.getInterval(e,t);return a==-1?0:e[a+2]},r.U._applySubs=function(t,e,a,o){for(var n=t.length-e-1,i=0;i<a.tabs.length;i++)if(a.tabs[i]!=null){var l,f=a.tabs[i];if(!f.coverage||(l=r._lctf.coverageIndex(f.coverage,t[e]))!=-1){if(a.ltype==1)t[e],f.fmt==1?t[e]=t[e]+f.delta:t[e]=f.newg[l];else if(a.ltype==4)for(var h=f.vals[l],d=0;d<h.length;d++){var p=h[d],m=p.chain.length;if(!(m>n)){for(var g=!0,b=0,x=0;x<m;x++){for(;t[e+b+(1+x)]==-1;)b++;p.chain[x]!=t[e+b+(1+x)]&&(g=!1)}if(g){for(t[e]=p.nglyph,x=0;x<m+b;x++)t[e+x+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var y=r._lctf.getInterval(f.cDef,t[e]),C=f.cDef[y+2],w=f.scset[C],U=0;U<w.length;U++){var T=w[U],M=T.input;if(!(M.length>n)){for(g=!0,x=0;x<M.length;x++){var L=r._lctf.getInterval(f.cDef,t[e+1+x]);if(y==-1&&f.cDef[L+2]!=M[x]){g=!1;break}}if(g){var I=T.substLookupRecords;for(d=0;d<I.length;d+=2)I[d],I[d+1]}}}else if(a.ltype==6&&f.fmt==3){if(!r.U._glsCovered(t,f.backCvg,e-f.backCvg.length)||!r.U._glsCovered(t,f.inptCvg,e)||!r.U._glsCovered(t,f.ahedCvg,e+f.inptCvg.length))continue;var G=f.lookupRec;for(U=0;U<G.length;U+=2){y=G[U];var k=o[G[U+1]];r.U._applySubs(t,e+y,k,o)}}}}},r.U._glsCovered=function(t,e,a){for(var o=0;o<e.length;o++)if(r._lctf.coverageIndex(e[o],t[a+o])==-1)return!1;return!0},r.U.glyphsToPath=function(t,e,a){for(var o={cmds:[],crds:[]},n=0,i=0;i<e.length;i++){var l=e[i];if(l!=-1){for(var f=i<e.length-1&&e[i+1]!=-1?e[i+1]:0,h=r.U.glyphToPath(t,l),d=0;d<h.crds.length;d+=2)o.crds.push(h.crds[d]+n),o.crds.push(h.crds[d+1]);for(a&&o.cmds.push(a),d=0;d<h.cmds.length;d++)o.cmds.push(h.cmds[d]);a&&o.cmds.push("X"),n+=t.hmtx.aWidth[l],i<e.length-1&&(n+=r.U.getPairAdjustment(t,l,f))}}return o},r.U.P={},r.U.P.moveTo=function(t,e,a){t.cmds.push("M"),t.crds.push(e,a)},r.U.P.lineTo=function(t,e,a){t.cmds.push("L"),t.crds.push(e,a)},r.U.P.curveTo=function(t,e,a,o,n,i,l){t.cmds.push("C"),t.crds.push(e,a,o,n,i,l)},r.U.P.qcurveTo=function(t,e,a,o,n){t.cmds.push("Q"),t.crds.push(e,a,o,n)},r.U.P.closePath=function(t){t.cmds.push("Z")},r.U._drawCFF=function(t,e,a,o,n){for(var i=e.stack,l=e.nStems,f=e.haveWidth,h=e.width,d=e.open,p=0,m=e.x,g=e.y,b=0,x=0,y=0,C=0,w=0,U=0,T=0,M=0,L=0,I=0,G={val:0,size:0};p<t.length;){r.CFF.getCharString(t,p,G);var k=G.val;if(p+=G.size,k=="o1"||k=="o18")i.length%2!=0&&!f&&(h=i.shift()+o.nominalWidthX),l+=i.length>>1,i.length=0,f=!0;else if(k=="o3"||k=="o23")i.length%2!=0&&!f&&(h=i.shift()+o.nominalWidthX),l+=i.length>>1,i.length=0,f=!0;else if(k=="o4")i.length>1&&!f&&(h=i.shift()+o.nominalWidthX,f=!0),d&&r.U.P.closePath(n),g+=i.pop(),r.U.P.moveTo(n,m,g),d=!0;else if(k=="o5")for(;i.length>0;)m+=i.shift(),g+=i.shift(),r.U.P.lineTo(n,m,g);else if(k=="o6"||k=="o7")for(var E=i.length,_=k=="o6",A=0;A<E;A++){var R=i.shift();_?m+=R:g+=R,_=!_,r.U.P.lineTo(n,m,g)}else if(k=="o8"||k=="o24"){E=i.length;for(var j=0;j+6<=E;)b=m+i.shift(),x=g+i.shift(),y=b+i.shift(),C=x+i.shift(),m=y+i.shift(),g=C+i.shift(),r.U.P.curveTo(n,b,x,y,C,m,g),j+=6;k=="o24"&&(m+=i.shift(),g+=i.shift(),r.U.P.lineTo(n,m,g))}else{if(k=="o11")break;if(k=="o1234"||k=="o1235"||k=="o1236"||k=="o1237")k=="o1234"&&(x=g,y=(b=m+i.shift())+i.shift(),I=C=x+i.shift(),U=C,M=g,m=(T=(w=(L=y+i.shift())+i.shift())+i.shift())+i.shift(),r.U.P.curveTo(n,b,x,y,C,L,I),r.U.P.curveTo(n,w,U,T,M,m,g)),k=="o1235"&&(b=m+i.shift(),x=g+i.shift(),y=b+i.shift(),C=x+i.shift(),L=y+i.shift(),I=C+i.shift(),w=L+i.shift(),U=I+i.shift(),T=w+i.shift(),M=U+i.shift(),m=T+i.shift(),g=M+i.shift(),i.shift(),r.U.P.curveTo(n,b,x,y,C,L,I),r.U.P.curveTo(n,w,U,T,M,m,g)),k=="o1236"&&(b=m+i.shift(),x=g+i.shift(),y=b+i.shift(),I=C=x+i.shift(),U=C,T=(w=(L=y+i.shift())+i.shift())+i.shift(),M=U+i.shift(),m=T+i.shift(),r.U.P.curveTo(n,b,x,y,C,L,I),r.U.P.curveTo(n,w,U,T,M,m,g)),k=="o1237"&&(b=m+i.shift(),x=g+i.shift(),y=b+i.shift(),C=x+i.shift(),L=y+i.shift(),I=C+i.shift(),w=L+i.shift(),U=I+i.shift(),T=w+i.shift(),M=U+i.shift(),Math.abs(T-m)>Math.abs(M-g)?m=T+i.shift():g=M+i.shift(),r.U.P.curveTo(n,b,x,y,C,L,I),r.U.P.curveTo(n,w,U,T,M,m,g));else if(k=="o14"){if(i.length>0&&!f&&(h=i.shift()+a.nominalWidthX,f=!0),i.length==4){var O=i.shift(),$=i.shift(),B=i.shift(),F=i.shift(),P=r.CFF.glyphBySE(a,B),D=r.CFF.glyphBySE(a,F);r.U._drawCFF(a.CharStrings[P],e,a,o,n),e.x=O,e.y=$,r.U._drawCFF(a.CharStrings[D],e,a,o,n)}d&&(r.U.P.closePath(n),d=!1)}else if(k=="o19"||k=="o20")i.length%2!=0&&!f&&(h=i.shift()+o.nominalWidthX),l+=i.length>>1,i.length=0,f=!0,p+=l+7>>3;else if(k=="o21")i.length>2&&!f&&(h=i.shift()+o.nominalWidthX,f=!0),g+=i.pop(),m+=i.pop(),d&&r.U.P.closePath(n),r.U.P.moveTo(n,m,g),d=!0;else if(k=="o22")i.length>1&&!f&&(h=i.shift()+o.nominalWidthX,f=!0),m+=i.pop(),d&&r.U.P.closePath(n),r.U.P.moveTo(n,m,g),d=!0;else if(k=="o25"){for(;i.length>6;)m+=i.shift(),g+=i.shift(),r.U.P.lineTo(n,m,g);b=m+i.shift(),x=g+i.shift(),y=b+i.shift(),C=x+i.shift(),m=y+i.shift(),g=C+i.shift(),r.U.P.curveTo(n,b,x,y,C,m,g)}else if(k=="o26")for(i.length%2&&(m+=i.shift());i.length>0;)b=m,x=g+i.shift(),m=y=b+i.shift(),g=(C=x+i.shift())+i.shift(),r.U.P.curveTo(n,b,x,y,C,m,g);else if(k=="o27")for(i.length%2&&(g+=i.shift());i.length>0;)x=g,y=(b=m+i.shift())+i.shift(),C=x+i.shift(),m=y+i.shift(),g=C,r.U.P.curveTo(n,b,x,y,C,m,g);else if(k=="o10"||k=="o29"){var V=k=="o10"?o:a;if(i.length==0)console.debug("error: empty stack");else{var z=i.pop(),N=V.Subrs[z+V.Bias];e.x=m,e.y=g,e.nStems=l,e.haveWidth=f,e.width=h,e.open=d,r.U._drawCFF(N,e,a,o,n),m=e.x,g=e.y,l=e.nStems,f=e.haveWidth,h=e.width,d=e.open}}else if(k=="o30"||k=="o31"){var K=i.length,Y=(j=0,k=="o31");for(j+=K-(E=-3&K);j<E;)Y?(x=g,y=(b=m+i.shift())+i.shift(),g=(C=x+i.shift())+i.shift(),E-j==5?(m=y+i.shift(),j++):m=y,Y=!1):(b=m,x=g+i.shift(),y=b+i.shift(),C=x+i.shift(),m=y+i.shift(),E-j==5?(g=C+i.shift(),j++):g=C,Y=!0),r.U.P.curveTo(n,b,x,y,C,m,g),j+=4}else{if((k+"").charAt(0)=="o")throw console.debug("Unknown operation: "+k,t),k;i.push(k)}}}e.x=m,e.y=g,e.nStems=l,e.haveWidth=f,e.width=h,e.open=d};var c=r,u={Typr:c};return s.Typr=c,s.default=u,Object.defineProperty(s,"__esModule",{value:!0}),s}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Ua(){return function(s){var r=Uint8Array,c=Uint16Array,u=Uint32Array,t=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(k,E){for(var _=new c(31),A=0;A<31;++A)_[A]=E+=1<<k[A-1];var R=new u(_[30]);for(A=1;A<30;++A)for(var j=_[A];j<_[A+1];++j)R[j]=j-_[A]<<5|A;return[_,R]},n=o(t,2),i=n[0],l=n[1];i[28]=258,l[258]=28;for(var f=o(e,0)[0],h=new c(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(k,E,_){for(var A=k.length,R=0,j=new c(E);R<A;++R)++j[k[R]-1];var O,$=new c(E);for(R=0;R<E;++R)$[R]=$[R-1]+j[R-1]<<1;if(_){O=new c(1<<E);var B=15-E;for(R=0;R<A;++R)if(k[R])for(var F=R<<4|k[R],P=E-k[R],D=$[k[R]-1]++<<P,V=D|(1<<P)-1;D<=V;++D)O[h[D]>>>B]=F}else for(O=new c(A),R=0;R<A;++R)k[R]&&(O[R]=h[$[k[R]-1]++]>>>15-k[R]);return O},g=new r(288);for(d=0;d<144;++d)g[d]=8;for(d=144;d<256;++d)g[d]=9;for(d=256;d<280;++d)g[d]=7;for(d=280;d<288;++d)g[d]=8;var b=new r(32);for(d=0;d<32;++d)b[d]=5;var x=m(g,9,1),y=m(b,5,1),C=function(k){for(var E=k[0],_=1;_<k.length;++_)k[_]>E&&(E=k[_]);return E},w=function(k,E,_){var A=E/8|0;return(k[A]|k[A+1]<<8)>>(7&E)&_},U=function(k,E){var _=E/8|0;return(k[_]|k[_+1]<<8|k[_+2]<<16)>>(7&E)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(k,E,_){var A=new Error(E||T[k]);if(A.code=k,Error.captureStackTrace&&Error.captureStackTrace(A,M),!_)throw A;return A},L=function(k,E,_){var A=k.length;if(!A||_&&!_.l&&A<5)return E||new r(0);var R=!E||_,j=!_||_.i;_||(_={}),E||(E=new r(3*A));var O,$=function(J){var Me=E.length;if(J>Me){var Ie=new r(Math.max(2*Me,J));Ie.set(E),E=Ie}},B=_.f||0,F=_.p||0,P=_.b||0,D=_.l,V=_.d,z=_.m,N=_.n,K=8*A;do{if(!D){_.f=B=w(k,F,1);var Y=w(k,F+1,3);if(F+=3,!Y){var de=k[(Oe=((O=F)/8|0)+(7&O&&1)+4)-4]|k[Oe-3]<<8,Q=Oe+de;if(Q>A){j&&M(0);break}R&&$(P+de),E.set(k.subarray(Oe,Q),P),_.b=P+=de,_.p=F=8*Q;continue}if(Y==1)D=x,V=y,z=9,N=5;else if(Y==2){var H=w(k,F,31)+257,oe=w(k,F+10,15)+4,ge=H+w(k,F+5,31)+1;F+=14;for(var ee=new r(ge),me=new r(19),ce=0;ce<oe;++ce)me[a[ce]]=w(k,F+3*ce,7);F+=3*oe;var we=C(me),Bt=(1<<we)-1,qe=m(me,we,1);for(ce=0;ce<ge;){var Oe,Te=qe[w(k,F,Bt)];if(F+=15&Te,(Oe=Te>>>4)<16)ee[ce++]=Oe;else{var Se=0,Le=0;for(Oe==16?(Le=3+w(k,F,3),F+=2,Se=ee[ce-1]):Oe==17?(Le=3+w(k,F,7),F+=3):Oe==18&&(Le=11+w(k,F,127),F+=7);Le--;)ee[ce++]=Se}}var He=ee.subarray(0,H),ve=ee.subarray(H);z=C(He),N=C(ve),D=m(He,z,1),V=m(ve,N,1)}else M(1);if(F>K){j&&M(0);break}}R&&$(P+131072);for(var kt=(1<<z)-1,Z=(1<<N)-1,xe=F;;xe=F){var se=(Se=D[U(k,F)&kt])>>>4;if((F+=15&Se)>K){j&&M(0);break}if(Se||M(2),se<256)E[P++]=se;else{if(se==256){xe=F,D=null;break}var ue=se-254;if(se>264){var pe=t[ce=se-257];ue=w(k,F,(1<<pe)-1)+i[ce],F+=pe}var Ee=V[U(k,F)&Z],te=Ee>>>4;if(Ee||M(3),F+=15&Ee,ve=f[te],te>3&&(pe=e[te],ve+=U(k,F)&(1<<pe)-1,F+=pe),F>K){j&&M(0);break}R&&$(P+131072);for(var Ze=P+ue;P<Ze;P+=4)E[P]=E[P-ve],E[P+1]=E[P+1-ve],E[P+2]=E[P+2-ve],E[P+3]=E[P+3-ve];P=Ze}}_.l=D,_.p=xe,_.b=P,D&&(B=1,_.m=z,_.d=V,_.n=N)}while(!B);return P==E.length?E:function(J,Me,Ie){(Me==null||Me<0)&&(Me=0),(Ie==null||Ie>J.length)&&(Ie=J.length);var Ne=new(J instanceof c?c:J instanceof u?u:r)(Ie-Me);return Ne.set(J.subarray(Me,Ie)),Ne}(E,0,P)},I=new r(0),G=typeof TextDecoder<"u"&&new TextDecoder;try{G.decode(I,{stream:!0})}catch{}return s.convert_streams=function(k){var E=new DataView(k),_=0;function A(){var H=E.getUint16(_);return _+=2,H}function R(){var H=E.getUint32(_);return _+=4,H}function j(H){de.setUint16(Q,H),Q+=2}function O(H){de.setUint32(Q,H),Q+=4}for(var $={signature:R(),flavor:R(),length:R(),numTables:A(),reserved:A(),totalSfntSize:R(),majorVersion:A(),minorVersion:A(),metaOffset:R(),metaLength:R(),metaOrigLength:R(),privOffset:R(),privLength:R()},B=0;Math.pow(2,B)<=$.numTables;)B++;B--;for(var F=16*Math.pow(2,B),P=16*$.numTables-F,D=12,V=[],z=0;z<$.numTables;z++)V.push({tag:R(),offset:R(),compLength:R(),origLength:R(),origChecksum:R()}),D+=16;var N,K=new Uint8Array(12+16*V.length+V.reduce(function(H,oe){return H+oe.origLength+4},0)),Y=K.buffer,de=new DataView(Y),Q=0;return O($.flavor),j($.numTables),j(F),j(B),j(P),V.forEach(function(H){O(H.tag),O(H.origChecksum),O(D),O(H.origLength),H.outOffset=D,(D+=H.origLength)%4!=0&&(D+=4-D%4)}),V.forEach(function(H){var oe,ge=k.slice(H.offset,H.offset+H.compLength);if(H.compLength!=H.origLength){var ee=new Uint8Array(H.origLength);oe=new Uint8Array(ge,2),L(oe,ee)}else ee=new Uint8Array(ge);K.set(ee,H.outOffset);var me=0;(D=H.outOffset+H.origLength)%4!=0&&(me=4-D%4),K.set(new Uint8Array(me).buffer,H.outOffset+H.origLength),N=D+me}),Y.slice(0,N)},Object.defineProperty(s,"__esModule",{value:!0}),s}({}).convert_streams}function Ta(s,r){const c={M:2,L:2,Q:4,C:6,Z:0},u={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,a=4,o=8,n=16,i=32;let l;function f(T){if(!l){const M={R:e,L:t,D:a,C:n,U:i,T:o};l=new Map;for(let L in u){let I=0;u[L].split(",").forEach(G=>{let[k,E]=G.split("+");k=parseInt(k,36),E=E?parseInt(E,36):0,l.set(I+=k,M[L]);for(let _=E;_--;)l.set(++I,M[L])})}}return l.get(T)||i}const h=1,d=2,p=3,m=4,g=[null,"isol","init","fina","medi"];function b(T){const M=new Uint8Array(T.length);let L=i,I=h,G=-1;for(let k=0;k<T.length;k++){const E=T.codePointAt(k);let _=f(E)|0,A=h;_&o||(L&(t|a|n)?_&(e|a|n)?(A=p,(I===h||I===p)&&M[G]++):_&(t|i)&&(I===d||I===m)&&M[G]--:L&(e|i)&&(I===d||I===m)&&M[G]--,I=M[k]=A,L=_,G=k,E>65535&&k++)}return M}function x(T,M){const L=[];for(let G=0;G<M.length;G++){const k=M.codePointAt(G);k>65535&&G++,L.push(s.U.codeToGlyph(T,k))}const I=T.GSUB;if(I){const{lookupList:G,featureList:k}=I;let E;const _=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,A=[];k.forEach(R=>{if(_.test(R.tag))for(let j=0;j<R.tab.length;j++){if(A[R.tab[j]])continue;A[R.tab[j]]=!0;const O=G[R.tab[j]],$=/^(isol|init|fina|medi)$/.test(R.tag);$&&!E&&(E=b(M));for(let B=0;B<L.length;B++)(!E||!$||g[E[B]]===R.tag)&&s.U._applySubs(L,B,O,G)}})}return L}function y(T,M){const L=new Int16Array(M.length*3);let I=0;for(;I<M.length;I++){const _=M[I];if(_===-1)continue;L[I*3+2]=T.hmtx.aWidth[_];const A=T.GPOS;if(A){const R=A.lookupList;for(let j=0;j<R.length;j++){const O=R[j];for(let $=0;$<O.tabs.length;$++){const B=O.tabs[$];if(O.ltype===1){if(s._lctf.coverageIndex(B.coverage,_)!==-1&&B.pos){E(B.pos,I);break}}else if(O.ltype===2){let F=null,P=G();if(P!==-1){const D=s._lctf.coverageIndex(B.coverage,M[P]);if(D!==-1){if(B.fmt===1){const V=B.pairsets[D];for(let z=0;z<V.length;z++)V[z].gid2===_&&(F=V[z])}else if(B.fmt===2){const V=s.U._getGlyphClass(M[P],B.classDef1),z=s.U._getGlyphClass(_,B.classDef2);F=B.matrix[V][z]}if(F){F.val1&&E(F.val1,P),F.val2&&E(F.val2,I);break}}}}else if(O.ltype===4){const F=s._lctf.coverageIndex(B.markCoverage,_);if(F!==-1){const P=G(k),D=P===-1?-1:s._lctf.coverageIndex(B.baseCoverage,M[P]);if(D!==-1){const V=B.markArray[F],z=B.baseArray[D][V.markClass];L[I*3]=z.x-V.x+L[P*3]-L[P*3+2],L[I*3+1]=z.y-V.y+L[P*3+1];break}}}else if(O.ltype===6){const F=s._lctf.coverageIndex(B.mark1Coverage,_);if(F!==-1){const P=G();if(P!==-1){const D=M[P];if(C(T,D)===3){const V=s._lctf.coverageIndex(B.mark2Coverage,D);if(V!==-1){const z=B.mark1Array[F],N=B.mark2Array[V][z.markClass];L[I*3]=N.x-z.x+L[P*3]-L[P*3+2],L[I*3+1]=N.y-z.y+L[P*3+1];break}}}}}}}}else if(T.kern&&!T.cff){const R=G();if(R!==-1){const j=T.kern.glyph1.indexOf(M[R]);if(j!==-1){const O=T.kern.rval[j].glyph2.indexOf(_);O!==-1&&(L[R*3+2]+=T.kern.rval[j].vals[O])}}}}return L;function G(_){for(let A=I-1;A>=0;A--)if(M[A]!==-1&&(!_||_(M[A])))return A;return-1}function k(_){return C(T,_)===1}function E(_,A){for(let R=0;R<3;R++)L[A*3+R]+=_[R]||0}}function C(T,M){const L=T.GDEF&&T.GDEF.glyphClassDef;return L?s.U._getGlyphClass(M,L):0}function w(...T){for(let M=0;M<T.length;M++)if(typeof T[M]=="number")return T[M]}function U(T){const M=Object.create(null),L=T["OS/2"],I=T.hhea,G=T.head.unitsPerEm,k=w(L&&L.sTypoAscender,I&&I.ascender,G),E={unitsPerEm:G,ascender:k,descender:w(L&&L.sTypoDescender,I&&I.descender,0),capHeight:w(L&&L.sCapHeight,k),xHeight:w(L&&L.sxHeight,k),lineGap:w(L&&L.sTypoLineGap,I&&I.lineGap),supportsCodePoint(_){return s.U.codeToGlyph(T,_)>0},forEachGlyph(_,A,R,j){let O=0;const $=1/E.unitsPerEm*A,B=x(T,_);let F=0;const P=y(T,B);return B.forEach((D,V)=>{if(D!==-1){let z=M[D];if(!z){const{cmds:N,crds:K}=s.U.glyphToPath(T,D);let Y="",de=0;for(let ee=0,me=N.length;ee<me;ee++){const ce=c[N[ee]];Y+=N[ee];for(let we=1;we<=ce;we++)Y+=(we>1?",":"")+K[de++]}let Q,H,oe,ge;if(K.length){Q=H=1/0,oe=ge=-1/0;for(let ee=0,me=K.length;ee<me;ee+=2){let ce=K[ee],we=K[ee+1];ce<Q&&(Q=ce),we<H&&(H=we),ce>oe&&(oe=ce),we>ge&&(ge=we)}}else Q=oe=H=ge=0;z=M[D]={index:D,advanceWidth:T.hmtx.aWidth[D],xMin:Q,yMin:H,xMax:oe,yMax:ge,path:Y}}j.call(null,z,O+P[V*3]*$,P[V*3+1]*$,F),O+=P[V*3+2]*$,R&&(O+=R*A)}F+=_.codePointAt(F)>65535?2:1}),O}};return E}return function(M){const L=new Uint8Array(M,0,4),I=s._bin.readASCII(L,0,4);if(I==="wOFF")M=r(M);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return U(s.parse(M)[0])}}const Ma=pt({name:"Typr Font Parser",dependencies:[ka,Ua,Ta],init(s,r,c){const u=s(),t=r();return c(u,t)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Ia(){return function(s){var r=function(){this.buckets=new Map};r.prototype.add=function(y){var C=y>>5;this.buckets.set(C,(this.buckets.get(C)||0)|1<<(31&y))},r.prototype.has=function(y){var C=this.buckets.get(y>>5);return C!==void 0&&(C&1<<(31&y))!=0},r.prototype.serialize=function(){var y=[];return this.buckets.forEach(function(C,w){y.push((+w).toString(36)+":"+C.toString(36))}),y.join(",")},r.prototype.deserialize=function(y){var C=this;this.buckets.clear(),y.split(",").forEach(function(w){var U=w.split(":");C.buckets.set(parseInt(U[0],36),parseInt(U[1],36))})};var c=Math.pow(2,8),u=c-1,t=~u;function e(y){var C=function(U){return U&t}(y).toString(16),w=function(U){return(U&t)+c-1}(y).toString(16);return"codepoint-index/plane"+(y>>16)+"/"+C+"-"+w+".json"}function a(y,C){var w=y&u,U=C.codePointAt(w/6|0);return((U=(U||48)-48)&1<<w%6)!=0}function o(y,C){var w;(w=y,w.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(U){return U.split("-").map(function(T){return parseInt(T.trim(),16)})})).forEach(function(U){var T=U[0],M=U[1];M===void 0&&(M=T),C(T,M)})}function n(y,C){o(y,function(w,U){for(var T=w;T<=U;T++)C(T)})}var i={},l={},f=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(y){var C=f.get(y);return C||(C=new r,n(y.ranges,function(w){return C.add(w)}),f.set(y,C)),C}var p,m=new Map;function g(y,C,w){return y[C]?C:y[w]?w:function(U){for(var T in U)return T}(y)}function b(y,C){var w=C;if(!y.includes(w)){w=1/0;for(var U=0;U<y.length;U++)Math.abs(y[U]-C)<Math.abs(w-C)&&(w=y[U])}return w}function x(y){return p||(p=new Set,n("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(C){p.add(C)})),p.has(y)}return s.CodePointSet=r,s.clearCache=function(){i={},l={}},s.getFontsForString=function(y,C){C===void 0&&(C={});var w,U=C.lang;U===void 0&&(U=/\p{Script=Hangul}/u.test(w=y)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(w)?"ja":"en");var T=C.category;T===void 0&&(T="sans-serif");var M=C.style;M===void 0&&(M="normal");var L=C.weight;L===void 0&&(L=400);var I=(C.dataUrl||h).replace(/\/$/g,""),G=new Map,k=new Uint8Array(y.length),E={},_={},A=new Array(y.length),R=new Map,j=!1;function O(F){var P=m.get(F);return P||(P=fetch(I+"/"+F).then(function(D){if(!D.ok)throw new Error(D.statusText);return D.json().then(function(V){if(!Array.isArray(V)||V[0]!==1)throw new Error("Incorrect schema version; need 1, got "+V[0]);return V[1]})}).catch(function(D){if(I!==h)return j||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+I+'", trying default CDN. '+D.message),j=!0),I=h,m.delete(F),O(F);throw D}),m.set(F,P)),P}for(var $=function(F){var P=y.codePointAt(F),D=e(P);A[F]=D,i[D]||R.has(D)||R.set(D,O(D).then(function(V){i[D]=V})),P>65535&&(F++,B=F)},B=0;B<y.length;B++)$(B);return Promise.all(R.values()).then(function(){R.clear();for(var F=function(D){var V=y.codePointAt(D),z=null,N=i[A[D]],K=void 0;for(var Y in N){var de=_[Y];if(de===void 0&&(de=_[Y]=new RegExp(Y).test(U||"en")),de){for(var Q in K=Y,N[Y])if(a(V,N[Y][Q])){z=Q;break}break}}if(!z){e:for(var H in N)if(H!==K){for(var oe in N[H])if(a(V,N[H][oe])){z=oe;break e}}}z||(console.debug("No font coverage for U+"+V.toString(16)),z="latin"),A[D]=z,l[z]||R.has(z)||R.set(z,O("font-meta/"+z+".json").then(function(ge){l[z]=ge})),V>65535&&(D++,P=D)},P=0;P<y.length;P++)F(P);return Promise.all(R.values())}).then(function(){for(var F,P=null,D=0;D<y.length;D++){var V=y.codePointAt(D);if(P&&(x(V)||d(P).has(V)))k[D]=k[D-1];else{P=l[A[D]];var z=E[P.id];if(!z){var N=P.typeforms,K=g(N,T,"sans-serif"),Y=g(N[K],M,"normal"),de=b((F=N[K])===null||F===void 0?void 0:F[Y],L);z=E[P.id]=I+"/font-files/"+P.id+"/"+K+"."+Y+"."+de+".woff"}var Q=G.get(z);Q==null&&(Q=G.size,G.set(z,Q)),k[D]=Q}V>65535&&(D++,k[D]=k[D-1])}return{fontUrls:Array.from(G.keys()),chars:k}})},Object.defineProperty(s,"__esModule",{value:!0}),s}({})}function _a(s,r){const c=Object.create(null),u=Object.create(null);function t(a,o){const n=i=>{console.error(`Failure loading font ${a}`,i)};try{const i=new XMLHttpRequest;i.open("get",a,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)n(new Error(i.statusText));else if(i.status>0)try{const l=s(i.response);l.src=a,o(l)}catch(l){n(l)}},i.onerror=n,i.send()}catch(i){n(i)}}function e(a,o){let n=c[a];n?o(n):u[a]?u[a].push(o):(u[a]=[o],t(a,i=>{i.src=a,c[a]=i,u[a].forEach(l=>l(i)),delete u[a]}))}return function(a,o,{lang:n,fonts:i=[],style:l="normal",weight:f="normal",unicodeFontsURL:h}={}){const d=new Uint8Array(a.length),p=[];a.length||x();const m=new Map,g=[];if(l!=="italic"&&(l="normal"),typeof f!="number"&&(f=f==="bold"?700:400),i&&!Array.isArray(i)&&(i=[i]),i=i.slice().filter(C=>!C.lang||C.lang.test(n)).reverse(),i.length){let T=0;(function M(L=0){for(let I=L,G=a.length;I<G;I++){const k=a.codePointAt(I);if(T===1&&p[d[I-1]].supportsCodePoint(k)||I>0&&/\s/.test(a[I]))d[I]=d[I-1],T===2&&(g[g.length-1][1]=I);else for(let E=d[I],_=i.length;E<=_;E++)if(E===_){const A=T===2?g[g.length-1]:g[g.length]=[I,I];A[1]=I,T=2}else{d[I]=E;const{src:A,unicodeRange:R}=i[E];if(!R||y(k,R)){const j=c[A];if(!j){e(A,()=>{M(I)});return}if(j.supportsCodePoint(k)){let O=m.get(j);typeof O!="number"&&(O=p.length,p.push(j),m.set(j,O)),d[I]=O,T=1;break}}}k>65535&&I+1<G&&(d[I+1]=d[I],I++,T===2&&(g[g.length-1][1]=I))}b()})()}else g.push([0,a.length-1]),b();function b(){if(g.length){const C=g.map(w=>a.substring(w[0],w[1]+1)).join(`
`);r.getFontsForString(C,{lang:n||void 0,style:l,weight:f,dataUrl:h}).then(({fontUrls:w,chars:U})=>{const T=p.length;let M=0;g.forEach(I=>{for(let G=0,k=I[1]-I[0];G<=k;G++)d[I[0]+G]=U[M++]+T;M++});let L=0;w.forEach((I,G)=>{e(I,k=>{p[G+T]=k,++L===w.length&&x()})})})}else x()}function x(){o({chars:d,fonts:p})}function y(C,w){for(let U=0;U<w.length;U++){const[T,M=T]=w[U];if(T<=C&&C<=M)return!0}return!1}}}const Ea=pt({name:"FontResolver",dependencies:[_a,Ma,Ia],init(s,r,c){return s(r,c())}});function Fa(s,r){const u=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,t="[^\\S\\u00A0]",e=new RegExp(`${t}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:p,lang:m,fonts:g,style:b,weight:x,preResolvedFonts:y,unicodeFontsURL:C},w){const U=({chars:T,fonts:M})=>{let L,I;const G=[];for(let k=0;k<T.length;k++)T[k]!==I?(I=T[k],G.push(L={start:k,end:k,fontObj:M[T[k]]})):L.end=k;w(G)};y?U(y):s(p,U,{lang:m,fonts:g,style:b,weight:x,unicodeFontsURL:C})}function o({text:p="",font:m,lang:g,sdfGlyphSize:b=64,fontSize:x=400,fontWeight:y=1,fontStyle:C="normal",letterSpacing:w=0,lineHeight:U="normal",maxWidth:T=1/0,direction:M,textAlign:L="left",textIndent:I=0,whiteSpace:G="normal",overflowWrap:k="normal",anchorX:E=0,anchorY:_=0,metricsOnly:A=!1,unicodeFontsURL:R,preResolvedFonts:j=null,includeCaretPositions:O=!1,chunkedBoundsSize:$=8192,colorRanges:B=null},F){const P=f(),D={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),x=+x,w=+w,T=+T,U=U||"normal",I=+I,a({text:p,lang:g,style:C,weight:y,fonts:typeof m=="string"?[{src:m}]:m,unicodeFontsURL:R,preResolvedFonts:j},V=>{D.fontLoad=f()-P;const z=isFinite(T);let N=null,K=null,Y=null,de=null,Q=null,H=null,oe=null,ge=null,ee=0,me=0,ce=G!=="nowrap";const we=new Map,Bt=f();let qe=I,Oe=0,Te=new h;const Se=[Te];V.forEach(Z=>{const{fontObj:xe}=Z,{ascender:se,descender:ue,unitsPerEm:pe,lineGap:Ee,capHeight:te,xHeight:Ze}=xe;let J=we.get(xe);if(!J){const re=x/pe,ie=U==="normal"?(se-ue+Ee)*re:U*x,gt=(ie-(se-ue)*re)/2,ae=Math.min(ie,(se-ue)*re),q=(se+ue)/2*re+ae/2;J={index:we.size,src:xe.src,fontObj:xe,fontSizeMult:re,unitsPerEm:pe,ascender:se*re,descender:ue*re,capHeight:te*re,xHeight:Ze*re,lineHeight:ie,baseline:-gt-se*re,caretTop:q,caretBottom:q-ae},we.set(xe,J)}const{fontSizeMult:Me}=J,Ie=p.slice(Z.start,Z.end+1);let Ne,Ye;xe.forEachGlyph(Ie,x,w,(re,ie,gt,ae)=>{ie+=Oe,ae+=Z.start,Ne=ie,Ye=re;const q=p.charAt(ae),Re=re.advanceWidth*Me,je=Te.count;let X;if("isEmpty"in re||(re.isWhitespace=!!q&&new RegExp(t).test(q),re.canBreakAfter=!!q&&e.test(q),re.isEmpty=re.xMin===re.xMax||re.yMin===re.yMax||u.test(q)),!re.isWhitespace&&!re.isEmpty&&me++,ce&&z&&!re.isWhitespace&&ie+Re+qe>T&&je){if(Te.glyphAt(je-1).glyphObj.canBreakAfter)X=new h,qe=-ie;else for(let Be=je;Be--;)if(Be===0&&k==="break-word"){X=new h,qe=-ie;break}else if(Te.glyphAt(Be).glyphObj.canBreakAfter){X=Te.splitAt(Be+1);const Pe=X.glyphAt(0).x;qe-=Pe;for(let ye=X.count;ye--;)X.glyphAt(ye).x-=Pe;break}X&&(Te.isSoftWrapped=!0,Te=X,Se.push(Te),ee=T)}let fe=Te.glyphAt(Te.count);fe.glyphObj=re,fe.x=ie+qe,fe.y=gt,fe.width=Re,fe.charIndex=ae,fe.fontData=J,q===`
`&&(Te=new h,Se.push(Te),qe=-(ie+Re+w*x)+I)}),Oe=Ne+Ye.advanceWidth*Me+w*x});let Le=0;Se.forEach(Z=>{let xe=!0;for(let se=Z.count;se--;){const ue=Z.glyphAt(se);xe&&!ue.glyphObj.isWhitespace&&(Z.width=ue.x+ue.width,Z.width>ee&&(ee=Z.width),xe=!1);let{lineHeight:pe,capHeight:Ee,xHeight:te,baseline:Ze}=ue.fontData;pe>Z.lineHeight&&(Z.lineHeight=pe);const J=Ze-Z.baseline;J<0&&(Z.baseline+=J,Z.cap+=J,Z.ex+=J),Z.cap=Math.max(Z.cap,Z.baseline+Ee),Z.ex=Math.max(Z.ex,Z.baseline+te)}Z.baseline-=Le,Z.cap-=Le,Z.ex-=Le,Le+=Z.lineHeight});let He=0,ve=0;if(E&&(typeof E=="number"?He=-E:typeof E=="string"&&(He=-ee*(E==="left"?0:E==="center"?.5:E==="right"?1:i(E)))),_&&(typeof _=="number"?ve=-_:typeof _=="string"&&(ve=_==="top"?0:_==="top-baseline"?-Se[0].baseline:_==="top-cap"?-Se[0].cap:_==="top-ex"?-Se[0].ex:_==="middle"?Le/2:_==="bottom"?Le:_==="bottom-baseline"?-Se[Se.length-1].baseline:i(_)*Le)),!A){const Z=r.getEmbeddingLevels(p,M);N=new Uint16Array(me),K=new Uint8Array(me),Y=new Float32Array(me*2),de={},oe=[1/0,1/0,-1/0,-1/0],ge=[],O&&(H=new Float32Array(p.length*4)),B&&(Q=new Uint8Array(me*3));let xe=0,se=-1,ue=-1,pe,Ee;if(Se.forEach((te,Ze)=>{let{count:J,width:Me}=te;if(J>0){let Ie=0;for(let ae=J;ae--&&te.glyphAt(ae).glyphObj.isWhitespace;)Ie++;let Ne=0,Ye=0;if(L==="center")Ne=(ee-Me)/2;else if(L==="right")Ne=ee-Me;else if(L==="justify"&&te.isSoftWrapped){let ae=0;for(let q=J-Ie;q--;)te.glyphAt(q).glyphObj.isWhitespace&&ae++;Ye=(ee-Me)/ae}if(Ye||Ne){let ae=0;for(let q=0;q<J;q++){let Re=te.glyphAt(q);const je=Re.glyphObj;Re.x+=Ne+ae,Ye!==0&&je.isWhitespace&&q<J-Ie&&(ae+=Ye,Re.width+=Ye)}}const re=r.getReorderSegments(p,Z,te.glyphAt(0).charIndex,te.glyphAt(te.count-1).charIndex);for(let ae=0;ae<re.length;ae++){const[q,Re]=re[ae];let je=1/0,X=-1/0;for(let fe=0;fe<J;fe++)if(te.glyphAt(fe).charIndex>=q){let Be=fe,Pe=fe;for(;Pe<J;Pe++){let ye=te.glyphAt(Pe);if(ye.charIndex>Re)break;Pe<J-Ie&&(je=Math.min(je,ye.x),X=Math.max(X,ye.x+ye.width))}for(let ye=Be;ye<Pe;ye++){const et=te.glyphAt(ye);et.x=X-(et.x+et.width-je)}break}}let ie;const gt=ae=>ie=ae;for(let ae=0;ae<J;ae++){const q=te.glyphAt(ae);ie=q.glyphObj;const Re=ie.index,je=Z.levels[q.charIndex]&1;if(je){const X=r.getMirroredCharacter(p[q.charIndex]);X&&q.fontData.fontObj.forEachGlyph(X,0,0,gt)}if(O){const{charIndex:X,fontData:fe}=q,Be=q.x+He,Pe=q.x+q.width+He;H[X*4]=je?Pe:Be,H[X*4+1]=je?Be:Pe,H[X*4+2]=te.baseline+fe.caretBottom+ve,H[X*4+3]=te.baseline+fe.caretTop+ve;const ye=X-se;ye>1&&l(H,se,ye),se=X}if(B){const{charIndex:X}=q;for(;X>ue;)ue++,B.hasOwnProperty(ue)&&(Ee=B[ue])}if(!ie.isWhitespace&&!ie.isEmpty){const X=xe++,{fontSizeMult:fe,src:Be,index:Pe}=q.fontData,ye=de[Be]||(de[Be]={});ye[Re]||(ye[Re]={path:ie.path,pathBounds:[ie.xMin,ie.yMin,ie.xMax,ie.yMax]});const et=q.x+He,Gt=q.y+te.baseline+ve;Y[X*2]=et,Y[X*2+1]=Gt;const Ut=et+ie.xMin*fe,Tt=Gt+ie.yMin*fe,Mt=et+ie.xMax*fe,It=Gt+ie.yMax*fe;Ut<oe[0]&&(oe[0]=Ut),Tt<oe[1]&&(oe[1]=Tt),Mt>oe[2]&&(oe[2]=Mt),It>oe[3]&&(oe[3]=It),X%$===0&&(pe={start:X,end:X,rect:[1/0,1/0,-1/0,-1/0]},ge.push(pe)),pe.end++;const Ke=pe.rect;if(Ut<Ke[0]&&(Ke[0]=Ut),Tt<Ke[1]&&(Ke[1]=Tt),Mt>Ke[2]&&(Ke[2]=Mt),It>Ke[3]&&(Ke[3]=It),N[X]=Re,K[X]=Pe,B){const $t=X*3;Q[$t]=Ee>>16&255,Q[$t+1]=Ee>>8&255,Q[$t+2]=Ee&255}}}}}),H){const te=p.length-se;te>1&&l(H,se,te)}}const kt=[];we.forEach(({index:Z,src:xe,unitsPerEm:se,ascender:ue,descender:pe,lineHeight:Ee,capHeight:te,xHeight:Ze})=>{kt[Z]={src:xe,unitsPerEm:se,ascender:ue,descender:pe,lineHeight:Ee,capHeight:te,xHeight:Ze}}),D.typesetting=f()-Bt,F({glyphIds:N,glyphFontIndices:K,glyphPositions:Y,glyphData:de,fontData:kt,caretPositions:H,glyphColors:Q,chunkedBounds:ge,fontSize:x,topBaseline:ve+Se[0].baseline,blockBounds:[He,ve-Le,He+ee,ve],visibleBounds:oe,timings:D})})}function n(p,m){o({...p,metricsOnly:!0},g=>{const[b,x,y,C]=g.blockBounds;m({width:y-b,height:C-x})})}function i(p){let m=p.match(/^([\d.]+)%$/),g=m?parseFloat(m[1]):NaN;return isNaN(g)?0:g/100}function l(p,m,g){const b=p[m*4],x=p[m*4+1],y=p[m*4+2],C=p[m*4+3],w=(x-b)/g;for(let U=0;U<g;U++){const T=(m+U)*4;p[T]=b+w*U,p[T+1]=b+w*(U+1),p[T+2]=y,p[T+3]=C}}function f(){return(self.performance||Date).now()}function h(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return h.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(p){let m=h.flyweight;return m.data=this.data,m.index=p,m},splitAt(p){let m=new h;return m.data=this.data.splice(p*d.length),m}},h.flyweight=d.reduce((p,m,g,b)=>(Object.defineProperty(p,m,{get(){return this.data[this.index*d.length+g]},set(x){this.data[this.index*d.length+g]=x}}),p),{data:null,index:0}),{typeset:o,measure:n}}const ot=()=>(self.performance||Date).now(),Ot=Jr();let Ar;function La(s,r,c,u,t,e,a,o,n,i,l=!0){return l?ja(s,r,c,u,t,e,a,o,n,i).then(null,f=>(Ar||(console.warn("WebGL SDF generation failed, falling back to JS",f),Ar=!0),Or(s,r,c,u,t,e,a,o,n,i))):Or(s,r,c,u,t,e,a,o,n,i)}const Lt=[],Ra=5;let ir=0;function bn(){const s=ot();for(;Lt.length&&ot()-s<Ra;)Lt.shift()();ir=Lt.length?setTimeout(bn,0):0}const ja=(...s)=>new Promise((r,c)=>{Lt.push(()=>{const u=ot();try{Ot.webgl.generateIntoCanvas(...s),r({timing:ot()-u})}catch(t){c(t)}}),ir||(ir=setTimeout(bn,0))}),Pa=4,Aa=2e3,Dr={};let Da=0;function Or(s,r,c,u,t,e,a,o,n,i){const l="TroikaTextSDFGenerator_JS_"+Da++%Pa;let f=Dr[l];return f||(f=Dr[l]={workerModule:pt({name:l,workerId:l,dependencies:[Jr,ot],init(h,d){const p=h().javascript.generate;return function(...m){const g=d();return{textureData:p(...m),timing:d()-g}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(s,r,c,u,t,e).then(({textureData:h,timing:d})=>{const p=ot(),m=new Uint8Array(h.length*4);for(let g=0;g<h.length;g++)m[g*4+i]=h[g];return Ot.webglUtils.renderImageData(a,m,o,n,s,r,1<<3-i),d+=ot()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{ga(l)},Aa)),{timing:d}})}function Oa(s){s._warm||(Ot.webgl.isSupported(s),s._warm=!0)}const Ba=Ot.webglUtils.resizeWebGLCanvasWithoutClearing,lt={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},Ga=new At;function st(){return(self.performance||Date).now()}const Br=Object.create(null);function wn(s,r){s=za({},s);const c=st(),{defaultFontURL:u}=lt,t=[];if(u&&t.push({label:"default",src:Gr(u)}),s.font&&t.push({label:"user",src:Gr(s.font)}),s.font=t,s.text=""+s.text,s.sdfGlyphSize=s.sdfGlyphSize||lt.sdfGlyphSize,s.unicodeFontsURL=s.unicodeFontsURL||lt.unicodeFontsURL,s.colorRanges!=null){let d={};for(let p in s.colorRanges)if(s.colorRanges.hasOwnProperty(p)){let m=s.colorRanges[p];typeof m!="number"&&(m=Ga.set(m).getHex()),d[p]=m}s.colorRanges=d}Object.freeze(s);const{textureWidth:e,sdfExponent:a}=lt,{sdfGlyphSize:o}=s,n=e/o*4;let i=Br[o];if(!i){const d=document.createElement("canvas");d.width=e,d.height=o*256/n,i=Br[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:d,sdfTexture:new Rt(d,void 0,void 0,void 0,qt,qt),contextLost:!1,glyphsByFont:new Map},i.sdfTexture.generateMipmaps=!1,$a(i)}const{sdfTexture:l,sdfCanvas:f}=i;Un(s).then(d=>{const{glyphIds:p,glyphFontIndices:m,fontData:g,glyphPositions:b,fontSize:x,timings:y}=d,C=[],w=new Float32Array(p.length*4);let U=0,T=0;const M=st(),L=g.map(_=>{let A=i.glyphsByFont.get(_.src);return A||i.glyphsByFont.set(_.src,A=new Map),A});p.forEach((_,A)=>{const R=m[A],{src:j,unitsPerEm:O}=g[R];let $=L[R].get(_);if(!$){const{path:V,pathBounds:z}=d.glyphData[j][_],N=Math.max(z[2]-z[0],z[3]-z[1])/o*(lt.sdfMargin*o+.5),K=i.glyphCount++,Y=[z[0]-N,z[1]-N,z[2]+N,z[3]+N];L[R].set(_,$={path:V,atlasIndex:K,sdfViewBox:Y}),C.push($)}const{sdfViewBox:B}=$,F=b[T++],P=b[T++],D=x/O;w[U++]=F+B[0]*D,w[U++]=P+B[1]*D,w[U++]=F+B[2]*D,w[U++]=P+B[3]*D,p[A]=$.atlasIndex}),y.quads=(y.quads||0)+(st()-M);const I=st();y.sdf={};const G=f.height,k=Math.ceil(i.glyphCount/n),E=Math.pow(2,Math.ceil(Math.log2(k*o)));E>G&&(console.info(`Increasing SDF texture size ${G}->${E}`),Ba(f,e,E),l.dispose()),Promise.all(C.map(_=>Sn(_,i,s.gpuAccelerateSDF).then(({timing:A})=>{y.sdf[_.atlasIndex]=A}))).then(()=>{C.length&&!i.contextLost&&(kn(i),l.needsUpdate=!0),y.sdfTotal=st()-I,y.total=st()-c,r(Object.freeze({parameters:s,sdfTexture:l,sdfGlyphSize:o,sdfExponent:a,glyphBounds:w,glyphAtlasIndices:p,glyphColors:d.glyphColors,caretPositions:d.caretPositions,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{i.contextLost||Oa(f)})}function Sn({path:s,atlasIndex:r,sdfViewBox:c},{sdfGlyphSize:u,sdfCanvas:t,contextLost:e},a){if(e)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:n}=lt,i=Math.max(c[2]-c[0],c[3]-c[1]),l=Math.floor(r/4),f=l%(o/u)*u,h=Math.floor(l/(o/u))*u,d=r%4;return La(u,u,s,c,i,n,t,f,h,d,a)}function $a(s){const r=s.sdfCanvas;r.addEventListener("webglcontextlost",c=>{console.log("Context Lost",c),c.preventDefault(),s.contextLost=!0}),r.addEventListener("webglcontextrestored",c=>{console.log("Context Restored",c),s.contextLost=!1;const u=[];s.glyphsByFont.forEach(t=>{t.forEach(e=>{u.push(Sn(e,s,!0))})}),Promise.all(u).then(()=>{kn(s),s.sdfTexture.needsUpdate=!0})})}function Wa({font:s,characters:r,sdfGlyphSize:c},u){let t=Array.isArray(r)?r.join(`
`):""+r;wn({font:s,sdfGlyphSize:c,text:t},u)}function za(s,r){for(let c in r)r.hasOwnProperty(c)&&(s[c]=r[c]);return s}let _t;function Gr(s){return _t||(_t=typeof document>"u"?{}:document.createElement("a")),_t.href=s,_t.href}function kn(s){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:r,sdfTexture:c}=s,{width:u,height:t}=r,e=s.sdfCanvas.getContext("webgl");let a=c.image.data;(!a||a.length!==u*t*4)&&(a=new Uint8Array(u*t*4),c.image={width:u,height:t,data:a},c.flipY=!1,c.isDataTexture=!0),e.readPixels(0,0,u,t,e.RGBA,e.UNSIGNED_BYTE,a)}}const Va=pt({name:"Typesetter",dependencies:[Fa,Ea,jn],init(s,r,c){return s(r,c())}}),Un=pt({name:"Typesetter",dependencies:[Va],init(s){return function(r){return new Promise(c=>{s.typeset(r,c)})}},getTransferables(s){const r=[];for(let c in s)s[c]&&s[c].buffer&&r.push(s[c].buffer);return r}});Un.onMainThread;const $r={};function Ha(s){let r=$r[s];return r||(r=$r[s]=new ar(1,1,s,s).translate(.5,.5,0)),r}const Na="aTroikaGlyphBounds",Wr="aTroikaGlyphIndex",Za="aTroikaGlyphColor";class Xa extends Hn{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new rn,this.boundingBox=new tn}computeBoundingSphere(){}computeBoundingBox(){}set detail(r){if(r!==this._detail){this._detail=r,(typeof r!="number"||r<1)&&(r=1);let c=Ha(r);["position","normal","uv"].forEach(u=>{this.attributes[u]=c.attributes[u].clone()}),this.setIndex(c.getIndex().clone())}}get detail(){return this._detail}set curveRadius(r){r!==this._curveRadius&&(this._curveRadius=r,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(r,c,u,t,e){this.updateAttributeData(Na,r,4),this.updateAttributeData(Wr,c,1),this.updateAttributeData(Za,e,3),this._blockBounds=u,this._chunkedBounds=t,this.instanceCount=c.length,this._updateBounds()}_updateBounds(){const r=this._blockBounds;if(r){const{curveRadius:c,boundingBox:u}=this;if(c){const{PI:t,floor:e,min:a,max:o,sin:n,cos:i}=Math,l=t/2,f=t*2,h=Math.abs(c),d=r[0]/h,p=r[2]/h,m=e((d+l)/f)!==e((p+l)/f)?-h:a(n(d)*h,n(p)*h),g=e((d-l)/f)!==e((p-l)/f)?h:o(n(d)*h,n(p)*h),b=e((d+t)/f)!==e((p+t)/f)?h*2:o(h-i(d)*h,h-i(p)*h);u.min.set(m,r[1],c<0?-b:0),u.max.set(g,r[3],c<0?0:b)}else u.min.set(r[0],r[1],0),u.max.set(r[2],r[3],0);u.getBoundingSphere(this.boundingSphere)}}applyClipRect(r){let c=this.getAttribute(Wr).count,u=this._chunkedBounds;if(u)for(let t=u.length;t--;){c=u[t].end;let e=u[t].rect;if(e[1]<r.w&&e[3]>r.y&&e[0]<r.z&&e[2]>r.x)break}this.instanceCount=c}updateAttributeData(r,c,u){const t=this.getAttribute(r);c?t&&t.array.length===c.length?(t.array.set(c),t.needsUpdate=!0):(this.setAttribute(r,new nn(c,u)),delete this._maxInstanceCount,this.dispose()):t&&this.deleteAttribute(r)}}const qa=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Ya=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Ka=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Ja=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Qa(s){const r=or(s,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new St},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Yt(0,0,0,0)},uTroikaClipRect:{value:new Yt(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new St},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new At},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Nn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:qa,vertexTransform:Ya,fragmentDefs:Ka,fragmentColorTransform:Ja,customRewriter({vertexShader:c,fragmentShader:u}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(u)&&(u=u.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(c)||(c=c.replace(Cn,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:c,fragmentShader:u}}});return r.transparent=!0,r.forceSinglePass=!0,Object.defineProperties(r,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),r}const ur=new Zn({color:16777215,side:on,transparent:!0}),zr=8421504,Vr=new Kt,Et=new be,Zt=new be,xt=[],es=new be,Xt="+x+y";function Hr(s){return Array.isArray(s)?s[0]:s}let Tn=()=>{const s=new Pt(new ar(1,1),ur);return Tn=()=>s,s},Mn=()=>{const s=new Pt(new ar(1,1,32,1),ur);return Mn=()=>s,s};const ts={type:"syncstart"},rs={type:"synccomplete"},In=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],ns=In.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let _n=class extends Pt{constructor(){const r=new Xa;super(r,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=zr,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Xt,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(r){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(r):(this._isSyncing=!0,this.dispatchEvent(ts),wn({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},c=>{this._isSyncing=!1,this._textRenderInfo=c,this.geometry.updateGlyphs(c.glyphBounds,c.glyphAtlasIndices,c.blockBounds,c.chunkedBounds,c.glyphColors);const u=this._queuedSyncs;u&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{u.forEach(t=>t&&t())})),this.dispatchEvent(rs),r&&r()})))}onBeforeRender(r,c,u,t,e,a){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(r){return Qa(r)}get material(){let r=this._derivedMaterial;const c=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=ur.clone());if((!r||!r.isDerivedFrom(c))&&(r=this._derivedMaterial=this.createDerivedMaterial(c),c.addEventListener("dispose",function u(){c.removeEventListener("dispose",u),r.dispose()})),this.hasOutline()){let u=r._outlineMtl;return u||(u=r._outlineMtl=Object.create(r,{id:{value:r.id+.1}}),u.isTextOutlineMaterial=!0,u.depthWrite=!1,u.map=null,r.addEventListener("dispose",function t(){r.removeEventListener("dispose",t),u.dispose()})),[u,r]}else return r}set material(r){r&&r.isTroikaTextMaterial?(this._derivedMaterial=r,this._baseMaterial=r.baseMaterial):this._baseMaterial=r}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(r){this.geometry.detail=r}get curveRadius(){return this.geometry.curveRadius}set curveRadius(r){this.geometry.curveRadius=r}get customDepthMaterial(){return Hr(this.material).getDepthMaterial()}set customDepthMaterial(r){}get customDistanceMaterial(){return Hr(this.material).getDistanceMaterial()}set customDistanceMaterial(r){}_prepareForRender(r){const c=r.isTextOutlineMaterial,u=r.uniforms,t=this.textRenderInfo;if(t){const{sdfTexture:o,blockBounds:n}=t;u.uTroikaSDFTexture.value=o,u.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),u.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,u.uTroikaSDFExponent.value=t.sdfExponent,u.uTroikaTotalBounds.value.fromArray(n),u.uTroikaUseGlyphColors.value=!c&&!!t.glyphColors;let i=0,l=0,f=0,h,d,p,m=0,g=0;if(c){let{outlineWidth:x,outlineOffsetX:y,outlineOffsetY:C,outlineBlur:w,outlineOpacity:U}=this;i=this._parsePercent(x)||0,l=Math.max(0,this._parsePercent(w)||0),h=U,m=this._parsePercent(y)||0,g=this._parsePercent(C)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,u.uTroikaStrokeColor.value.set(p??zr),d=this.strokeOpacity,d==null&&(d=1)),h=this.fillOpacity;u.uTroikaEdgeOffset.value=i,u.uTroikaPositionOffset.value.set(m,g),u.uTroikaBlurRadius.value=l,u.uTroikaStrokeWidth.value=f,u.uTroikaStrokeOpacity.value=d,u.uTroikaFillOpacity.value=h??1,u.uTroikaCurveRadius.value=this.curveRadius||0;let b=this.clipRect;if(b&&Array.isArray(b)&&b.length===4)u.uTroikaClipRect.value.fromArray(b);else{const x=(this.fontSize||.1)*100;u.uTroikaClipRect.value.set(n[0]-x,n[1]-x,n[2]+x,n[3]+x)}this.geometry.applyClipRect(u.uTroikaClipRect.value)}u.uTroikaSDFDebug.value=!!this.debugSDF,r.polygonOffset=!!this.depthOffset,r.polygonOffsetFactor=r.polygonOffsetUnits=this.depthOffset||0;const e=c?this.outlineColor||0:this.color;if(e==null)delete r.color;else{const o=r.hasOwnProperty("color")?r.color:r.color=new At;(e!==o._input||typeof e=="object")&&o.set(o._input=e)}let a=this.orientation||Xt;if(a!==r._orientation){let o=u.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let n=a!==Xt&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(n){let[,i,l,f,h]=n;Et.set(0,0,0)[l]=i==="-"?1:-1,Zt.set(0,0,0)[h]=f==="-"?-1:1,Vr.lookAt(es,Et.cross(Zt),Zt),o.setFromMatrix4(Vr)}else o.identity();r._orientation=a}}_parsePercent(r){if(typeof r=="string"){let c=r.match(/^(-?[\d.]+)%$/),u=c?parseFloat(c[1]):NaN;r=(isNaN(u)?0:u/100)*this.fontSize}return r}localPositionToTextCoords(r,c=new St){c.copy(r);const u=this.curveRadius;return u&&(c.x=Math.atan2(r.x,Math.abs(u)-Math.abs(r.z))*Math.abs(u)),c}worldPositionToTextCoords(r,c=new St){return Et.copy(r),this.localPositionToTextCoords(this.worldToLocal(Et),c)}raycast(r,c){const{textRenderInfo:u,curveRadius:t}=this;if(u){const e=u.blockBounds,a=t?Mn():Tn(),o=a.geometry,{position:n,uv:i}=o.attributes;for(let l=0;l<i.count;l++){let f=e[0]+i.getX(l)*(e[2]-e[0]);const h=e[1]+i.getY(l)*(e[3]-e[1]);let d=0;t&&(d=t-Math.cos(f/t)*t,f=Math.sin(f/t)*t),n.setXYZ(l,f,h,d)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,xt.length=0,a.raycast(r,xt);for(let l=0;l<xt.length;l++)xt[l].object=this,c.push(xt[l])}}copy(r){const c=this.geometry;return super.copy(r),this.geometry=c,ns.forEach(u=>{this[u]=r[u]}),this}clone(){return new this.constructor().copy(this)}};In.forEach(s=>{const r="_private_"+s;Object.defineProperty(_n.prototype,s,{get(){return this[r]},set(c){c!==this[r]&&(this[r]=c,this._needsSync=!0)}})});new tn;new At;const Nr=S.forwardRef(({sdfGlyphSize:s=64,anchorX:r="center",anchorY:c="middle",font:u,fontSize:t=1,children:e,characters:a,onSync:o,...n},i)=>{const l=dt(({invalidate:p})=>p),[f]=S.useState(()=>new _n),[h,d]=S.useMemo(()=>{const p=[];let m="";return S.Children.forEach(e,g=>{typeof g=="string"||typeof g=="number"?m+=g:p.push(g)}),[p,m]},[e]);return Pn(()=>new Promise(p=>Wa({font:u,characters:a},p)),["troika-text",u,a]),S.useLayoutEffect(()=>void f.sync(()=>{l(),o&&o(f)})),S.useEffect(()=>()=>f.dispose(),[f]),S.createElement("primitive",An({object:f,ref:i,font:u,text:d,anchorX:r,anchorY:c,fontSize:t,sdfGlyphSize:s},n),h)}),Ge=S.memo(({isPerf:s,color:r,colorBlind:c,customData:u,isMemory:t,isShadersInfo:e,metric:a,fontSize:o,offsetY:n=0,offsetX:i,round:l,hasInstance:f})=>{const{width:h,height:d}=dt(g=>g.viewport),p=S.useRef(null),m=S.useRef(null);return Po("log",function([b,x]){var y;if(!b||!p.current||(u&&(p.current.text=(Math.round(We().customData*Math.pow(10,l))/Math.pow(10,l)).toFixed(l)),!a))return;let C=b[a];if(e?C=(y=x.info.programs)==null?void 0:y.length:a==="matriceCount"?C=De.value:!s&&x.info.render&&(C=(t?x.info.memory:x.info.render)[a]),a==="fps"&&(p.current.color=We().overclockingFps?Ue(c).overClock.toString():`rgb(${Ue(c).fps.toString()})`),p.current.text=(Math.round(C*Math.pow(10,l))/Math.pow(10,l)).toFixed(l),f){const w=x.info.instance;if(typeof w>"u"&&a!=="matriceCount")return;let U;a==="matriceCount"?U=ct.value:U=w[a],U>0?(p.current.fontSize=o/1.15,m.current.fontSize=C>0?o/1.4:o,p.current.position.y=d/2-n-o/1.9,m.current.text=" ±	"+(Math.round(U*Math.pow(10,l))/Math.pow(10,l)).toFixed(l)):(m.current.text&&(m.current.text=""),p.current.position.y=d/2-n-o,p.current.fontSize=o)}De.value-=1,p.current.updateMatrix(),p.current.matrixWorld.copy(p.current.matrix)}),v.jsxs(S.Suspense,{fallback:null,children:[v.jsxs(Nr,{textAlign:"justify",matrixAutoUpdate:!1,ref:p,fontSize:o,position:[-h/2+i+o,d/2-n-o,0],color:r,characters:"0123456789",onUpdate:g=>{g.updateMatrix(),De.value-=1,g.matrixWorld.copy(g.matrix)},children:[v.jsx("meshBasicMaterial",{blending:hr}),"0"]}),f&&v.jsx(Nr,{textAlign:"justify",matrixAutoUpdate:!1,ref:m,fontSize:8,position:[-h/2+i+o,d/2-n-o*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:g=>{g.updateMatrix(),De.value-=1,g.matrixWorld.copy(g.matrix)},children:v.jsx("meshBasicMaterial",{blending:hr})})]})}),os=({colorBlind:s,customData:r,minimal:c,matrixUpdate:u})=>v.jsxs(v.Fragment,{children:[v.jsx(Ge,{colorBlind:s,color:`rgb(${Ue(s).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),v.jsx(Ge,{color:`rgb(${Ue(s).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),v.jsx(Ge,{color:`rgb(${Ue(s).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),c?null:v.jsxs(v.Fragment,{children:[v.jsx(Ge,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),v.jsx(Ge,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),v.jsx(Ge,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),v.jsx(Ge,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),v.jsx(Ge,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),v.jsx(Ge,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),v.jsx(Ge,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),u&&v.jsx(Ge,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),r&&v.jsx(Ge,{color:`rgb(${Ue(s).custom.toString()})`,customData:r,fontSize:14,offsetY:0,offsetX:c?200:320,round:r.round||2})]}),is=({colorBlind:s,minimal:r,chart:c={length:120,hz:60}})=>{const u=S.useMemo(()=>({fps:new Float32Array(c.length*3),cpu:new Float32Array(c.length*3),gpu:new Float32Array(c.length*3)}),[c]),t=S.useRef(null),e=S.useRef(null),a=S.useRef(null),o=S.useRef(null),n=S.useMemo(()=>new be(0,0,0),[]),i=(l,f=1,h,d)=>{let p=0;const{width:m,height:g}=d,b=We().chart.data[l];if(!b||b.length===0)return;const x=r?2:6,y=r?12:50;let C=b.length;for(let w=0;w<C;w++){let U=(We().chart.circularId+w+1)%C;b[U]!==void 0&&(b[U]>p&&(p=b[U]*f),n.set(x+w/(C-1)*(m-x*2)-m/2,Math.min(100,b[U])*f/100*(g-x*2-y)-g/2,0),n.toArray(h.attributes.position.array,w*3))}h.attributes.position.needsUpdate=!0};return it(function({viewport:f}){i("fps",1,t.current,f),e.current&&e.current.color.set(We().overclockingFps?Ue(s).overClock.toString():`rgb(${Ue(s).fps.toString()})`),i("gpu",5,a.current,f),i("cpu",5,o.current,f)}),v.jsxs(v.Fragment,{children:[v.jsxs("line",{onUpdate:l=>{l.updateMatrix(),De.value-=1,l.matrixWorld.copy(l.matrix)},children:[v.jsx("bufferGeometry",{ref:t,children:v.jsx("bufferAttribute",{attach:"attributes-position",count:c.length,array:u.fps,itemSize:3,usage:Wt,needsUpdate:!0})}),v.jsx("lineBasicMaterial",{ref:e,color:`rgb(${Ue(s).fps.toString()})`,transparent:!0,opacity:.5})]}),v.jsxs("line",{onUpdate:l=>{l.updateMatrix(),De.value-=1,l.matrixWorld.copy(l.matrix)},children:[v.jsx("bufferGeometry",{ref:a,children:v.jsx("bufferAttribute",{attach:"attributes-position",count:c.length,array:u.gpu,itemSize:3,usage:Wt,needsUpdate:!0})}),v.jsx("lineBasicMaterial",{color:`rgb(${Ue(s).gpu.toString()})`,transparent:!0,opacity:.5})]}),v.jsxs("line",{onUpdate:l=>{l.updateMatrix(),De.value-=1,l.matrixWorld.copy(l.matrix)},children:[v.jsx("bufferGeometry",{ref:o,children:v.jsx("bufferAttribute",{attach:"attributes-position",count:c.length,array:u.cpu,itemSize:3,usage:Wt,needsUpdate:!0})}),v.jsx("lineBasicMaterial",{color:`rgb(${Ue(s).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},as=({colorBlind:s,chart:r,customData:c,matrixUpdate:u,showGraph:t=!0,antialias:e=!0,minimal:a})=>{const o=S.useRef(void 0),n=ze(i=>i.paused);return v.jsxs(yi,{style:{display:"flex",position:"absolute",height:`${a?37:t?100:60}px`,minWidth:`${a?"100px":c?"370px":"310px"}`},children:[v.jsx(Qr,{ref:o,orthographic:!0,camera:{rotation:[0,0,0]},dpr:e?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:i})=>{i.traverse(l=>{l.matrixWorldAutoUpdate=!1,l.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${a?37:t?100:60}px`},children:n?null:v.jsxs(v.Fragment,{children:[v.jsx(ss,{}),v.jsx(os,{customData:c,minimal:a,matrixUpdate:u}),t&&v.jsx(is,{colorBlind:s,minimal:a,chart:r})]})}),n&&v.jsxs(Ci,{children:[v.jsx(ta,{})," PAUSED"]})]})},ss=()=>(it(function({gl:r,scene:c,camera:u}){u.updateMatrix(),De.value-=1,u.matrixWorld.copy(u.matrix),u.matrixWorldInverse.copy(u.matrixWorld).invert(),r.render(c,u),ct.value=0,De.value=0},1/0),null),ls=S.forwardRef(({portal:s,className:r,children:c,name:u,...t},e)=>{const a=dt(l=>l.gl),o=S.useRef(null),n=S.useRef(null),i=(s==null?void 0:s.current)!=null?s.current:a.domElement.parentNode;return S.useLayoutEffect(()=>{if(!o.current||!i)return;const l=document.createElement("div"),f=n.current=en(l);return i.appendChild(l),()=>{f.unmount(),n.current=null,i.removeChild(l)}},[i]),S.useLayoutEffect(()=>{const l=n.current;l&&l.render(v.jsx("div",{ref:e,className:r,children:c}))}),v.jsx("group",{name:u,...t,ref:o})});function cs(s){let r=0;for(let u in s.attributes){const t=s.getAttribute(u);r+=t.count*t.itemSize*t.array.BYTES_PER_ELEMENT}const c=s.getIndex();return r+=c?c.count*c.itemSize*c.array.BYTES_PER_ELEMENT:0,r}const Zr=(s,r)=>{const c=t=>{switch(t){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},u=t=>{switch(t){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:s,url:r.image.currentSrc,encoding:u(r.encoding),wrapT:c(r.wrapT),flipY:r.flipY.toString()}},us=({program:s,material:r,setTexNumber:c})=>{const u=ze(a=>a.gl),[t,e]=S.useState(null);return S.useEffect(()=>{if(u){const a=s==null?void 0:s.getUniforms();let o=0;const n=new Map;a.seq.forEach(i=>{if(!i.id.includes("uTroika")&&i.id!=="isOrthographic"&&i.id!=="uvTransform"&&i.id!=="lightProbe"&&i.id!=="projectionMatrix"&&i.id!=="viewMatrix"&&i.id!=="normalMatrix"&&i.id!=="modelMatrix"&&i.id!=="modelViewMatrix"){let l=[],f={name:i.id};i.cache&&(i.cache.forEach(h=>{typeof h<"u"&&l.push(h.toString().substring(0,4))}),f.value=l.join(),r[i.id]&&r[i.id].image&&r[i.id].image&&(o++,f.value=Zr(i.id,r[i.id])),f.value||(f.value="empty"),n.set(i.id,f))}}),r.uniforms&&Object.keys(r.uniforms).forEach(i=>{const l=r.uniforms[i];if(l.value){const{value:f}=l;let h={name:i};if(i.includes("uTroika"))return;if(f.isTexture)o++,h.value=Zr(i,f);else{let d=JSON.stringify(f);try{d=JSON.stringify(f)}catch{d=f.toString()}h.value=d}n.set(i,h)}}),o>0&&c(o),e(n)}},[]),v.jsx(hn,{children:t&&Array.from(t.values()).map(a=>v.jsx("span",{children:typeof a.value=="string"?v.jsx("li",{children:v.jsxs("span",{children:[a.name," :"," ",v.jsxs("b",{children:[a.value.substring(0,30),a.value.length>30?"...":""]})]})}):v.jsxs(v.Fragment,{children:[v.jsx("li",{children:v.jsxs("b",{children:[a.value.name,":"]})}),v.jsxs("div",{children:[Object.keys(a.value).map(o=>o!=="name"?v.jsx("div",{children:o==="url"?v.jsx("a",{href:a.value[o],target:"_blank",children:v.jsx("img",{src:a.value[o]})}):v.jsxs("li",{children:[o,": ",v.jsx("b",{children:a.value[o]})]})},o):null),v.jsxs(pn,{onClick:()=>{var o;console.info(r[a.value.name]||((o=r==null?void 0:r.uniforms[a.value.name])==null?void 0:o.value))},children:["console.info(",a.value.name,");"]})]})]})},a.name))})},fs=({el:s})=>{ze(u=>u.log);const r=ze(u=>u.gl),c=u=>{if(!r)return 0;const t=Math.round(u.drawCounts.total/(r.info.render.triangles+r.info.render.lines+r.info.render.points)*100*10)/10;return isFinite(t)&&t||0};return v.jsx(v.Fragment,{children:s.drawCounts.total>0&&v.jsxs(ke,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[s.drawCounts.type==="Triangle"?v.jsx(xn,{style:{top:"-1px"}}):v.jsx(gn,{style:{top:"-1px"}}),s.drawCounts.total,v.jsxs("small",{children:[s.drawCounts.type,"s"]}),r&&v.jsxs(Fe,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[s.visible&&!s.material.wireframe?c(s):0,"%"]})]})})},ds=({el:s})=>{const[r,c]=S.useState(s.visible),[u,t]=S.useState(s.expand),[e,a]=S.useState(0),{meshes:o,program:n,material:i}=s;return v.jsxs(wi,{children:[v.jsxs(xi,{onClick:()=>{s.expand=!u,Object.keys(o).forEach(l=>{const f=o[l];f.material.wireframe=!1}),t(!u)},children:[v.jsx(cr,{style:{marginRight:"6px"},children:u?v.jsx("span",{children:v.jsx(mn,{})}):v.jsx("span",{children:v.jsx(vn,{})})}),n&&v.jsxs("span",{children:[v.jsx(Si,{children:n.name}),v.jsxs(ke,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[v.jsx(Zi,{style:{top:"-1px"}}),Object.keys(o).length,v.jsx("small",{children:Object.keys(o).length>1?"users":"user"})]}),e>0&&v.jsxs(ke,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[e>1?v.jsx(tr,{style:{top:"-1px"}}):v.jsx(tr,{style:{top:"-1px"}}),e,v.jsx("small",{children:"tex"})]}),v.jsx(fs,{el:s}),i.glslVersion==="300 es"&&v.jsxs(ke,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[v.jsx(na,{style:{top:"-1px"}}),"300",v.jsx("small",{children:"es"}),v.jsx(Fe,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),v.jsx(bi,{onPointerEnter:()=>{Object.keys(o).forEach(l=>{const f=o[l];f.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(o).forEach(l=>{const f=o[l];f.material.wireframe=!1})},onClick:l=>{l.stopPropagation(),Object.keys(o).forEach(f=>{const h=o[f],d=!r;h.visible=d,s.visible=d,c(d)})},children:r?v.jsx(Wi,{}):v.jsx(Gi,{})})]}),v.jsxs("div",{style:{maxHeight:u?"9999px":0,overflow:"hidden"},children:[v.jsxs(Er,{children:[v.jsx(Li,{})," Uniforms:"]}),v.jsx(us,{program:n,material:i,setTexNumber:a}),v.jsxs(Er,{children:[v.jsx(ji,{})," Geometries:"]}),v.jsx(hn,{children:o&&Object.keys(o).map(l=>o[l]&&o[l].geometry&&v.jsxs(Mi,{children:[v.jsxs("span",{children:[o[l].geometry.type,": "]}),o[l].userData&&o[l].userData.drawCount&&v.jsxs("b",{children:[v.jsxs("div",{children:[o[l].userData.drawCount.count,v.jsxs("small",{children:[" ",o[l].userData.drawCount.type,"s"]})]}),v.jsx("br",{}),v.jsxs("div",{children:[Math.round(cs(o[l].geometry)/1024*1e3)/1e3,"Kb",v.jsx("small",{children:" memory used"})]})]})]},l))}),v.jsxs(pn,{onClick:()=>{console.info(i)},children:["console.info(",i.type,")"]})]})]})},hs=()=>{ze(r=>r.triggerProgramsUpdate);const s=ze(r=>r.programs);return v.jsx(Ui,{children:s&&Array.from(s.values()).map(r=>r&&r?v.jsx(ds,{el:r},r.material.uuid):null)})},Ue=s=>({overClock:"#ff6eff",fps:s?"100, 143, 255":"238,38,110",cpu:s?"254, 254, 98":"66,226,46",gpu:s?"254,254,254":"253,151,31",custom:s?"86,180,233":"40,255,255"}),ps=({showGraph:s,colorBlind:r})=>{const c=ze(t=>t.overclockingFps),u=ze(t=>t.fpsLimit);return v.jsxs(Fe,{style:s?{color:c?Ue(r).overClock.toString():`rgb(${Ue(r).fps})`}:{},children:["FPS ",c?`${u}🚀`:""]})},gs=({showGraph:s,colorBlind:r,customData:c,minimal:u})=>{const t=ze(e=>e.gl);return t?v.jsxs(vi,{children:[v.jsxs(ke,{children:[v.jsx(qi,{}),v.jsx(Fe,{style:s?{color:`rgb(${Ue(r).gpu.toString()})`}:{},children:"GPU"}),v.jsx(Ht,{children:"ms"})]}),v.jsxs(ke,{children:[v.jsx(ia,{}),v.jsx(Fe,{style:s?{color:`rgb(${Ue(r).cpu.toString()})`}:{},children:"CPU"}),v.jsx(Ht,{children:"ms"})]}),v.jsxs(ke,{children:[v.jsx(Hi,{}),v.jsx(ps,{showGraph:s,colorBlind:r})]}),!u&&t&&v.jsxs(ke,{children:[v.jsx(sa,{}),v.jsx(Fe,{children:t.info.render.calls===1?"call":"calls"})]}),!u&&t&&v.jsxs(ke,{children:[v.jsx(xn,{}),v.jsx(Fe,{children:"Triangles"})]}),c&&v.jsxs(ke,{children:[v.jsx(Ei,{}),v.jsx(Fe,{style:s?{color:`rgb(${Ue(r).custom})`}:{},children:c.name}),c.info&&v.jsx(Ht,{children:c.info})]})]}):null},ms=({showGraph:s,colorBlind:r,deepAnalyze:c,customData:u,matrixUpdate:t,openByDefault:e,minimal:a})=>v.jsxs(v.Fragment,{children:[v.jsx(gs,{showGraph:s,colorBlind:r,customData:u,minimal:a}),!a&&v.jsx(xs,{matrixUpdate:t,openByDefault:e,deepAnalyze:c,showGraph:s})]}),vs=({matrixUpdate:s})=>v.jsxs("div",{children:[v.jsxs(ke,{children:[v.jsx(Ki,{}),v.jsx(Fe,{children:"Geometries"})]}),v.jsxs(ke,{children:[v.jsx(tr,{}),v.jsx(Fe,{children:"Textures"})]}),v.jsxs(ke,{children:[v.jsx(gn,{}),v.jsx(Fe,{children:"shaders"})]}),v.jsxs(ke,{children:[v.jsx(Qi,{}),v.jsx(Fe,{children:"Lines"})]}),v.jsxs(ke,{children:[v.jsx(Ai,{}),v.jsx(Fe,{children:"Points"})]}),s&&v.jsxs(ke,{children:[v.jsx(Oi,{}),v.jsx(Fe,{children:"Matrices"})]})]}),Xr=({tab:s,title:r,set:c})=>{const u=ze(t=>t.tab);return v.jsx(cr,{className:`${u===s?" __perf_toggle_tab_active":""}`,onClick:()=>{c(!0),Ae({tab:s})},children:v.jsx("span",{children:r})})},xs=({openByDefault:s,showGraph:r,deepAnalyze:c,matrixUpdate:u})=>{const[t,e]=Je.useState(s);return v.jsxs("span",{children:[v.jsx(ys,{show:t,showGraph:r,matrixUpdate:u}),s&&!c?null:v.jsxs(Ti,{className:"__perf_toggle",children:[c&&v.jsx(Xr,{tab:"programs",title:"Programs",set:e}),c&&v.jsx(Xr,{tab:"infos",title:"Infos",set:e}),v.jsx(cr,{onClick:()=>{e(!t)},children:t?v.jsxs("span",{children:[v.jsx(mn,{})," Minimize"]}):v.jsxs("span",{children:[v.jsx(vn,{})," More"]})})]})]})},ys=({show:s,showGraph:r,matrixUpdate:c})=>{const u=ze(t=>t.tab);return v.jsxs(v.Fragment,{children:[v.jsx(vs,{matrixUpdate:c}),s&&v.jsx("div",{children:v.jsx(ki,{style:{marginTop:r?"38px":0},children:u==="programs"&&v.jsx(hs,{})})})]})},Cs=({showGraph:s=!0,colorBlind:r=!1,openByDefault:c=!0,className:u,overClock:t=!1,style:e,position:a="top-right",chart:o,logsPerSecond:n,deepAnalyze:i=!1,antialias:l=!0,customData:f,matrixUpdate:h,minimal:d})=>{const p=S.useRef(null);return v.jsxs(v.Fragment,{children:[v.jsx(Go,{logsPerSecond:n,chart:o,overClock:t,deepAnalyze:i,matrixUpdate:h}),v.jsx(ls,{name:"r3f-perf",children:v.jsxs(mi,{className:(u?" ".concat(u):" ")+` ${a||""} ${d?"minimal":""}`,style:{minHeight:d?"37px":s?"100px":"60px",...e},ref:p,children:[v.jsx(as,{perfContainerRef:p,colorBlind:r,chart:o,showGraph:s,antialias:l,customData:f,minimal:d,matrixUpdate:h}),v.jsx(ms,{colorBlind:r,showGraph:s,deepAnalyze:i,openByDefault:c,customData:f,matrixUpdate:h,minimal:d})]})})]})},wt=new Qn;wt.gravity.set(0,0,0);const bs=1/60;let qr=performance.now()/1e3;function ws(s,r,c=1,u){const t=S.useRef(null);return S.useEffect(()=>{if(!s.current)return;const e=new eo(r),a=new to({mass:c,shape:e});return a.position.copy(s.current.position),a.linearDamping=.9,a.angularDamping=.5,a.fixedRotation=!1,wt.addBody(a),t.current=a,console.log("Sphere physics body initialized:",a.id),()=>{wt.has(a)&&wt.removeBody(a)}},[s,r,c]),it(()=>{if(s.current&&t.current){const e=Math.sin(Date.now()*.001)*u,a=Math.cos(Date.now()*.0015)*u,o=Math.sin(Date.now()*.002)*u;t.current.applyLocalForce(new Qt(e,a,o),new Qt(0,0,0)),s.current.position.copy(t.current.position),s.current.quaternion.copy(t.current.quaternion)}}),t.current}function Ss(){const{isPhysicsPaused:s}=S.useContext(Qe);return it(()=>{if(s)return;const r=performance.now()/1e3;let c=r-qr;qr=r,c=Math.min(c,.1),wt.step(bs,c,10)}),null}async function ks(s,r=4096){if(console.log("Creating texture atlas for",s.length,"images"),s.length===0)return console.log("No images provided, returning empty atlas"),{texture:new Rt,imageUVs:[],atlasWidth:0,atlasHeight:0};const c=await Promise.all(s.map(d=>new Promise((p,m)=>{const g=new Image;g.onload=()=>{console.log("Loaded image:",d,"size:",g.width,"x",g.height),p(g)},g.onerror=b=>{console.error("Failed to load image:",d,b),m(b)},g.src=d,g.crossOrigin="Anonymous"})));let u=0,t=0,e=0;const a=[];for(const d of c){if(u+d.width>r&&(u=0,t+=e,e=0),t+d.height>r){console.warn("Texture atlas max size exceeded. Some images might not fit.");break}a.push({img:d,x:u,y:t,width:d.width,height:d.height}),u+=d.width,e=Math.max(e,d.height)}const o=Math.min(r,Math.max(...a.map(d=>d.x+d.width))),n=Math.min(r,t+e),i=document.createElement("canvas");i.width=o>0?o:1,i.height=n>0?n:1;const l=i.getContext("2d");a.forEach(({img:d,x:p,y:m})=>{l.drawImage(d,p,m)});const f=new Xn(i);f.needsUpdate=!0,f.minFilter=qn,f.magFilter=qt;const h=a.map(({x:d,y:p,width:m,height:g})=>new Yt(d/o,p/n,(d+m)/o,(p+g)/n));return console.log("Created texture atlas:",o,"x",n,"with",h.length,"images"),{texture:f,imageUVs:h,atlasWidth:o,atlasHeight:n}}const Us=`
  attribute vec4 instanceUV; // x, y, z, w correspond to Umin, Vmin, Umax, Vmax
  varying vec2 vUv;
  varying vec4 vInstanceUV;

  void main() {
    vUv = uv; // Standard UVs for the plane (0-1)
    vInstanceUV = instanceUV; // Pass instance UV rect to fragment shader
    gl_Position = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(position, 1.0);
  }
`,Ts=`
  uniform sampler2D atlasTexture; // Our texture atlas
  varying vec2 vUv;
  varying vec4 vInstanceUV; // Contains Umin, Vmin, Umax, Vmax for this instance

  void main() {
    // Calculate the actual UV coordinates for this instance by scaling and offsetting vUv
    vec2 uv = mix(vInstanceUV.xy, vInstanceUV.zw, vUv);
    vec4 textureColor = texture2D(atlasTexture, uv);

    // Apply alpha if image has transparency, otherwise just display color
    if (textureColor.a < 0.1) discard; // Discard fully transparent pixels
    gl_FragColor = textureColor;
  }
`,En=S.forwardRef(({imageUrls:s,sphereRadius:r,sphereRef:c,onPointerDown:u,onPointerMove:t,onPointerUp:e},a)=>{var x;const{config:o}=S.useContext(Qe),n=S.useRef();S.useImperativeHandle(a,()=>n.current);const i=s.length;S.useEffect(()=>{console.log("ImagePlane: Rendering",i,"images on sphere with radius",r)},[i,r]);const[l,f]=S.useState({texture:new Rt,imageUVs:[],atlasWidth:0,atlasHeight:0}),h=S.useRef(new Set),d=S.useCallback((y,C)=>{C?h.current.add(y):h.current.delete(y)},[]);S.useImperativeHandle(a,()=>({...n.current,markImageInteracting:d}),[d]),S.useEffect(()=>{let y=!0;return(async()=>{try{const{texture:w,imageUVs:U,atlasWidth:T,atlasHeight:M}=await ks(s);y?f({texture:w,imageUVs:U,atlasWidth:T,atlasHeight:M}):w.dispose()}catch(w){console.error("Failed to create texture atlas:",w),y&&f({texture:new Rt,imageUVs:[],atlasWidth:0,atlasHeight:0})}})(),()=>{y=!1,l.texture&&(l.texture.dispose(),l.texture.image&&typeof l.texture.image.src=="string"&&l.texture.image.src.startsWith("blob:")&&URL.revokeObjectURL(l.texture.image.src))}},[s]);const p=S.useMemo(()=>new Ve,[]),m=S.useMemo(()=>{const y=new Float32Array(i*4);return new nn(y,4)},[i]),g=S.useMemo(()=>{if(!l.imageUVs.length)return null;const y={uvs:new Float32Array(i*4),positions:[],matrices:[]};for(let C=0;C<i;C++){const w=l.imageUVs[C];w&&(y.uvs[C*4]=w.x,y.uvs[C*4+1]=w.y,y.uvs[C*4+2]=w.z,y.uvs[C*4+3]=w.w);const U=Math.acos(-1+2*C/i),T=Math.sqrt(i*Math.PI)*U,M=r*Math.sin(U)*Math.cos(T),L=r*Math.sin(U)*Math.sin(T),I=r*Math.cos(U);y.positions.push(new be(M,L,I)),C===0&&(console.log("ImagePlane: First image position:",{x:M,y:L,z:I,sphereRadius:r,phi:U,theta:T}),console.log("ImagePlane: First image matrix:",p.matrix.elements)),p.position.set(M,L,I),p.lookAt(0,0,0),p.rotateY(Math.PI),p.scale.setScalar(o.appSettings.imagePlaneSize),p.updateMatrix(),y.matrices.push(p.matrix.clone())}return y},[l.imageUVs,i,r,o.appSettings.imagePlaneSize,p]);S.useEffect(()=>{if(!(!g||!n.current)){console.log("Setting up",i,"image instances on sphere"),n.current.userData={};for(let y=0;y<i;y++)m.setX(y,g.uvs[y*4]),m.setY(y,g.uvs[y*4+1]),m.setZ(y,g.uvs[y*4+2]),m.setW(y,g.uvs[y*4+3]),n.current.setMatrixAt(y,g.matrices[y]),n.current.userData[y]=g.matrices[y].clone();n.current.instanceMatrix.needsUpdate=!0,n.current.geometry.setAttribute("instanceUV",m)}},[g,i,m]);const b=S.useMemo(()=>{var C;return console.log("ImagePlane: Creating material with texture:",(C=l.texture)==null?void 0:C.uuid),new Yn({uniforms:{atlasTexture:{value:l.texture}},vertexShader:Us,fragmentShader:Ts,transparent:!0,side:on})},[(x=l.texture)==null?void 0:x.uuid]);return S.useEffect(()=>()=>{b&&b.dispose()},[b]),S.useEffect(()=>{n.current&&n.current.material&&(n.current.material.uniforms.atlasTexture.value=l.texture,n.current.material.needsUpdate=!0)},[l.texture]),it(()=>{if(!(c!=null&&c.current)||!n.current||!g)return;const y=c.current.matrixWorld,C=new be,w=new Jt,U=new be;y.decompose(C,w,U);for(let T=0;T<i;T++){if(h.current.has(T))continue;const M=g.positions[T];if(!M||!M.clone)continue;const L=M.clone().applyQuaternion(w).add(C);p.position.copy(L),p.lookAt(C),p.rotateY(Math.PI),p.scale.setScalar(o.appSettings.imagePlaneSize),p.updateMatrix(),n.current.setMatrixAt(T,p.matrix)}n.current.instanceMatrix.needsUpdate=!0}),i===0||!l.texture||l.imageUVs.length===0?(console.log("ImagePlane: Not rendering - imageCount:",i,"atlasData.texture:",!!l.texture,"imageUVs.length:",l.imageUVs.length),null):(console.log("ImagePlane: Rendering",i,"images with atlas texture:",l.texture.uuid),console.log("ImagePlane: Atlas data:",{textureWidth:l.atlasWidth,textureHeight:l.atlasHeight,imageUVs:l.imageUVs.map((y,C)=>`Image ${C}: (${y.x.toFixed(3)}, ${y.y.toFixed(3)}) to (${y.z.toFixed(3)}, ${y.w.toFixed(3)})`)}),v.jsxs("instancedMesh",{ref:n,args:[null,null,i],castShadow:!0,receiveShadow:!0,onPointerDown:u,onPointerMove:t,onPointerUp:e,children:[v.jsx("planeGeometry",{args:[1,1]}),v.jsx("primitive",{object:b,attach:"material"})]}))});En.displayName="ImagePlane";function Ms(s){const{gl:r}=dt(),{config:c}=S.useContext(Qe),u=S.useRef(!1),t=S.useRef(0),e=S.useRef(0),a=10,o=S.useCallback(l=>{var f,h;console.log("Sphere interaction: onPointerDown received",{button:l.button,clientX:l.clientX,clientY:l.clientY,spherePhysicsBody:!!s,target:(h=(f=l.target)==null?void 0:f.constructor)==null?void 0:h.name}),l.button===0&&(l.stopPropagation(),u.current=!0,t.current=l.clientX,e.current=l.clientY,s&&(s.angularVelocity.set(0,0,0),console.log("Sphere interaction: Angular velocity reset")))},[s]),n=S.useCallback(l=>{if(!u.current||!s)return;if(l.buttons!==void 0&&!(l.buttons&1)){u.current=!1;return}const f=l.clientX-t.current,h=l.clientY-e.current;if(Math.abs(f)<1&&Math.abs(h)<1)return;console.log("Sphere interaction: onPointerMove",{deltaX:f,deltaY:h,isDragging:u.current,spherePhysicsBody:!!s});const d=h*c.appSettings.dragSensitivity,p=f*c.appSettings.dragSensitivity,m=new Qt(d,p,0);s.applyTorque(m),console.log("Sphere interaction: Applied torque",{torqueX:d,torqueY:p,deltaX:f,deltaY:h}),s.angularVelocity.length()>a&&(s.angularVelocity.normalize(),s.angularVelocity.scale(a,s.angularVelocity)),t.current=l.clientX,e.current=l.clientY},[s,c.appSettings.dragSensitivity]),i=S.useCallback(l=>{console.log("Sphere interaction: onPointerUp received",{button:l==null?void 0:l.button,isDragging:u.current}),(!l||l.button===0||l.button===void 0)&&(u.current=!1,console.log("Sphere interaction: Drag state reset"))},[]);return S.useEffect(()=>(r.domElement.addEventListener("pointermove",n),r.domElement.addEventListener("pointerup",i),()=>{r.domElement.removeEventListener("pointermove",n),r.domElement.removeEventListener("pointerup",i)}),[r,n,i]),it(()=>{an()}),{onPointerDown:o}}const Yr={DRAG_THRESHOLD_SQ:.01,TAP_DURATION_MS:200};function Is(s,r,c){const{gl:u,camera:t}=dt(),{config:e,setIsPhysicsPaused:a,setSelectedImageId:o,selectedImageId:n,isPhysicsPaused:i}=S.useContext(Qe),l=S.useMemo(()=>new Kn,[]),f=S.useMemo(()=>new St,[]),h=S.useMemo(()=>new be(0,0,0),[]),d=S.useMemo(()=>new rn(h,r),[r,h]),p=S.useRef(!1),m=S.useRef(null),g=S.useRef(new be),b=S.useRef(0),x=S.useMemo(()=>new Ve,[]),y=S.useRef(new Map),[C,w]=S.useState(null),U=S.useRef(new Map),T=.05,M=3,L=0,I=S.useCallback(j=>{if(!y.current.has(j)){const O=new Kt;s.current&&(s.current.getMatrixAt(j,O),y.current.set(j,O.clone()))}return y.current.get(j)},[s]),G=S.useCallback((j,O)=>{if(!s.current||j===null)return;const $=new Kt;s.current.getMatrixAt(j,$),x.matrix.copy($),x.matrix.decompose(x.position,x.quaternion,x.scale);const B=I(j),F=new Ve;B?(F.matrix.copy(B),F.matrix.decompose(F.position,F.quaternion,F.scale)):F.scale.setScalar(e.appSettings.imagePlaneSize),O?x.scale.copy(F.scale):x.scale.setScalar(.001),x.updateMatrix(),s.current.setMatrixAt(j,x.matrix),s.current.instanceMatrix.needsUpdate=!0},[s,x,I,e.appSettings.imagePlaneSize]),k=S.useCallback(j=>{a(j),j&&c&&(c.angularVelocity.set(0,0,0),c.velocity.set(0,0,0))},[a,c]);S.useEffect(()=>{if(s.current&&s.current.userData){const j=e.catalogs.find(O=>O.id===e.appSettings.initialCatalogId);if(j){const O=j.images.length;for(let $=0;$<O;$++)n===null&&G($,!0),U.current.set($,0)}}},[n,s,G,e.appSettings.initialCatalogId,e.catalogs]);const E=S.useCallback(j=>{if(j.preventDefault(),C===null)return;k(!0);const O=I(C);if(!O)return;x.matrix.copy(O),x.matrix.decompose(x.position,x.quaternion,x.scale);const $=x.position.clone().normalize();let B=U.current.get(C)||0;j.deltaY<0?B=Math.min(B+T,M):B=Math.max(B-T,L),U.current.set(C,B);const F=$.multiplyScalar(r+B);new gr(x.position).to(F,100).easing(mr.Quadratic.Out).onUpdate(()=>{x.updateMatrix(),s.current.setMatrixAt(C,x.matrix),s.current.instanceMatrix.needsUpdate=!0}).onComplete(()=>{}).start();const P=B>L?new be(e.appSettings.imagePlaneSize*1.2,e.appSettings.imagePlaneSize*1.2,1):new be(e.appSettings.imagePlaneSize,e.appSettings.imagePlaneSize,1);new gr(x.scale).to(P,100).easing(mr.Quadratic.Out).start()},[C,s,r,x,I,e.appSettings.imagePlaneSize,k]);S.useEffect(()=>(u.domElement.addEventListener("wheel",E,{passive:!1}),()=>{u.domElement.removeEventListener("wheel",E)}),[E,u.domElement]);const _=S.useCallback(j=>{if(j.button!==0)return;if(!t||!u.domElement){console.warn("Camera or DOM element not ready for onPointerDown.");return}f.x=j.clientX/u.domElement.clientWidth*2-1,f.y=-(j.clientY/u.domElement.clientHeight)*2+1,l.setFromCamera(f,t);const O=l.intersectObject(s.current);if(O.length>0){const $=O[0].instanceId;m.current=$,g.current.copy(O[0].point),p.current=!1,b.current=Date.now(),w($)}else w(null),i&&k(!1)},[u,t,s,l,f,w,i,k]),A=S.useCallback(j=>{if(m.current!==null){if(!t||!u.domElement){console.warn("Camera or DOM element not ready for onPointerMove.");return}if(f.x=j.clientX/u.domElement.clientWidth*2-1,f.y=-(j.clientY/u.domElement.clientHeight)*2+1,l.setFromCamera(f,t),!p.current){const O=new Jn().setFromNormalAndCoplanarPoint(t.getWorldDirection(new be).negate(),g.current),$=new be;l.ray.intersectPlane(O,$),$.distanceToSquared(g.current)>Yr.DRAG_THRESHOLD_SQ&&(p.current=!0,w(null),i&&k(!1))}if(p.current){i&&k(!1);const O=l.ray.intersectSphere(d);if(O){const $=O.clone(),B=U.current.get(m.current)||0,F=I(m.current),P=new Ve;F&&(P.matrix.copy(F),P.matrix.decompose(P.position,P.quaternion,P.scale));const V=$.clone().normalize().multiplyScalar(r+B),z=new Jt().setFromUnitVectors(new be(0,0,1),V.clone().normalize()).multiply(new Jt().setFromAxisAngle(new be(0,1,0),Math.PI));x.position.copy(V),x.quaternion.copy(z),x.scale.copy(P.scale),x.updateMatrix(),s.current.setMatrixAt(m.current,x.matrix),s.current.instanceMatrix.needsUpdate=!0}}}},[u,t,s,l,f,d,x,g,i,k,r,U,I,w]),R=S.useCallback(j=>{var B;if(m.current===null)return;const O=Date.now()-b.current,$=m.current;if(console.log(`Image interaction: PointerUp on index ${$}, duration: ${O}ms, isDragging: ${p.current}`),!p.current&&O<Yr.TAP_DURATION_MS){console.log(`Image interaction: CLICK DETECTED on index ${$}`);const F=e.catalogs.find(V=>V.id===e.appSettings.initialCatalogId),P=(B=F==null?void 0:F.images[$])==null?void 0:B.name,D=s.current.userData[$];P&&D?(o(P),k(!0),G($,!1),console.log(`Image interaction: Image ${$} (${P}) sent to 2D viewport. 3D instance hidden.`)):console.warn(`Image interaction: Could not find image data or original matrix for index ${$}.`)}m.current=null,p.current=!1,console.log(`Image interaction: Drag/click state reset for index ${$}`)},[e,o,k,s,G,m,p]);return it(()=>{if(an(),C!==null&&!p.current){const j=U.current.get(C)||0;if(j>L||U.current.has(C)){const O=I(C);if(O){x.matrix.copy(O),x.matrix.decompose(x.position,x.quaternion,x.scale);const B=x.position.clone().normalize().multiplyScalar(r+j);x.position.copy(B),x.lookAt(h),x.rotateY(Math.PI);const F=j>L?new be(e.appSettings.imagePlaneSize*1.2,e.appSettings.imagePlaneSize*1.2,1):new be(e.appSettings.imagePlaneSize,e.appSettings.imagePlaneSize,1);x.scale.copy(F),x.updateMatrix(),s.current.setMatrixAt(C,x.matrix),s.current.instanceMatrix.needsUpdate=!0}}}}),{onPointerDown:_,onPointerMove:A,onPointerUp:R}}function _s(){const{config:s}=S.useContext(Qe),r=S.useRef(),c=S.useRef(),u=s.spheres.find(m=>m.id===s.appSettings.initialSphereTextureId),t=s.catalogs.find(m=>m.id===s.appSettings.initialCatalogId),e=S.useMemo(()=>t?t.images.map(g=>`/images/${t.folderName}/${g.file}`):[],[t]);S.useEffect(()=>{t&&(console.log("Generated image URLs for catalog",t.id,":",e),console.log("Image URLs count:",e.length),console.log("Sphere radius:",s.appSettings.sphereRadius),console.log("Image plane size:",s.appSettings.imagePlaneSize))},[t,e,s.appSettings.sphereRadius,s.appSettings.imagePlaneSize]);const a=fr(pr,`/textures/${u.texture}`),o=u.materialProps.bumpMap?fr(pr,`/textures/${u.materialProps.bumpMap}`):null,n=ws(r,s.appSettings.sphereRadius,10,s.appSettings.wobbleIntensity);S.useEffect(()=>{n&&console.log("Sphere physics body initialized:",n.id)},[n]);const{onPointerDown:i}=Ms(n),{onPointerDown:l,onPointerMove:f,onPointerUp:h}=Is(c,s.appSettings.sphereRadius,n),d=n?{onPointerDown:i}:{},p=n?{onPointerDown:l,onPointerMove:f,onPointerUp:h}:{};return S.useEffect(()=>{n&&console.log("SphereGallery: Physics body ready, interactions enabled")},[n]),v.jsxs(v.Fragment,{children:[v.jsxs("mesh",{ref:r,receiveShadow:!0,castShadow:!0,userData:{manualControl:!0},onPointerDown:m=>{console.log("Sphere mesh pointerdown received:",{clientX:m.clientX,clientY:m.clientY,button:m.button,hasSphereHandler:!!d.onPointerDown,spherePhysicsBody:!!n}),d.onPointerDown?d.onPointerDown(m):console.warn("Sphere interaction handler not available")},children:[v.jsx("sphereGeometry",{args:[s.appSettings.sphereRadius,64,64]}),v.jsx("meshStandardMaterial",{map:a,...u.materialProps,bumpMap:o})]}),e.length>0&&v.jsxs(v.Fragment,{children:[console.log("SphereGallery: Rendering ImagePlane with",e.length,"images"),v.jsx(En,{ref:c,imageUrls:e,sphereRadius:s.appSettings.sphereRadius,sphereRef:r,...p})]})]})}function Es(){return S.useContext(Qe),Je.useEffect(()=>{const s=document.querySelector("canvas");if(s){const r=c=>{console.log("Global canvas pointerdown:",{clientX:c.clientX,clientY:c.clientY,button:c.button,target:c.target})};return s.addEventListener("pointerdown",r),()=>{s.removeEventListener("pointerdown",r)}}},[]),null}function Fs({isOpen:s,imageUrl:r,imageName:c}){const{setSelectedImageId:u,setIsPhysicsPaused:t}=S.useContext(Qe),e=S.useRef(),a=S.useCallback(()=>{u(null),t(!1),console.log("DetailViewport: Closed. Physics resumed.")},[u,t]);return S.useEffect(()=>{const o=i=>{s&&e.current&&!e.current.contains(i.target)&&a()},n=i=>{s&&i.key==="Escape"&&a()};return s&&(document.addEventListener("mousedown",o),document.addEventListener("keydown",n)),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("keydown",n)}},[s,a]),v.jsx("div",{ref:e,style:{position:"absolute",top:0,bottom:0,right:s?0:-500,width:"500px",backgroundColor:"rgba(20, 20, 20, 0.9)",boxShadow:"-5px 0px 15px rgba(0,0,0,0.5)",padding:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",color:"white",zIndex:20,transition:"right 0.3s ease-out",opacity:s?1:0,transitionProperty:"right, opacity"},children:s&&v.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[v.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[v.jsx("h2",{style:{margin:0},children:c||"Image Details"}),v.jsx("button",{onClick:a,style:{background:"none",border:"1px solid white",color:"white",fontSize:"18px",cursor:"pointer",padding:"5px 10px",borderRadius:"5px",transition:"background-color 0.2s ease"},onMouseEnter:o=>o.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:o=>o.target.style.backgroundColor="transparent",children:"X"})]}),r?v.jsx("img",{src:r,alt:c,style:{maxWidth:"100%",maxHeight:"80%",objectFit:"contain",border:"1px solid #444",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"}}):v.jsx("p",{children:"Loading image..."}),v.jsxs("p",{style:{marginTop:"20px",textAlign:"center"},children:["This is the detailed 2D view for ",v.jsx("strong",{children:c}),"."]}),v.jsxs("div",{style:{marginTop:"10px",fontSize:"14px",color:"#ccc",textAlign:"center"},children:["Click outside or press ",v.jsx("kbd",{style:{background:"#333",padding:"2px 6px",borderRadius:"3px",border:"1px solid #555"},children:"ESC"})," to return to the 3D gallery."]})]})})}function Ls(){const[s,r]=S.useState(null),[c,u]=S.useState(!0),[t,e]=S.useState(null);return S.useEffect(()=>{(async()=>{try{const o=await fetch("/config.json");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const n=await o.json();r(n)}catch(o){console.error("Failed to load config.json:",o),e(o)}finally{u(!1)}})()},[]),{config:s,loading:c,error:t}}const Qe=S.createContext(null);function Rs(){const{config:s,loading:r,error:c}=Ls(),[u,t]=S.useState(null),[e,a]=S.useState(!1),[o,n]=S.useState(null);if(S.useEffect(()=>{s&&t(s)},[s]),r)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",backgroundColor:"#333"},children:"Loading configuration..."});if(c)return v.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"red",backgroundColor:"#333"},children:["Error loading configuration: ",c.message]});if(!u)return null;const i={config:u,setCurrentConfig:t,isPhysicsPaused:e,setIsPhysicsPaused:a,selectedImageId:o,setSelectedImageId:n},l=u.catalogs.find(d=>d.id===u.appSettings.initialCatalogId),f=o?l==null?void 0:l.images.find(d=>d.name===o):null,h=f?`/images/${l.folderName}/${f.file}`:null;return v.jsx("div",{className:"App",style:{width:"100vw",height:"100vh",overflow:"hidden"},children:v.jsxs(Qe.Provider,{value:i,children:[v.jsxs(Qr,{camera:{position:[0,0,u.appSettings.sphereRadius*2],fov:60},dpr:[1,2],shadows:!0,children:[v.jsx(Cs,{position:"top-left"}),v.jsx("ambientLight",{intensity:.5}),v.jsx("directionalLight",{position:[5,10,5],intensity:1,castShadow:!0}),v.jsx(Dn,{preset:"city",background:!0}),v.jsx(Ss,{}),v.jsx(_s,{})]}),v.jsx(Es,{}),v.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px",background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"15px",borderRadius:"8px",fontSize:"14px",fontFamily:"Arial, sans-serif",maxWidth:"300px",zIndex:1e3},children:[v.jsx("div",{style:{fontWeight:"bold",marginBottom:"10px"},children:"Controls:"}),v.jsxs("div",{style:{marginBottom:"5px"},children:["• ",v.jsx("strong",{children:"Drag sphere"})," to rotate"]}),v.jsxs("div",{style:{marginBottom:"5px"},children:["• ",v.jsx("strong",{children:"Click image"})," to view details"]}),v.jsxs("div",{style:{marginBottom:"5px"},children:["• ",v.jsx("strong",{children:"Mouse Wheel"})," - Move focused image closer/further"]}),v.jsx("div",{style:{fontSize:"12px",opacity:"0.8",marginTop:"8px"},children:"Spin the globe to position images in front of the camera, then use mouse wheel to adjust image distance from sphere surface."})]}),v.jsx(Fs,{isOpen:o!==null,imageUrl:h,imageName:f==null?void 0:f.name})]})})}en(document.getElementById("root")).render(v.jsx(S.StrictMode,{children:v.jsx(Rs,{})}));
